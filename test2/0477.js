g.meta.num = '0477';

g.resources = [
	{		//0
		filename: 'dialogbox.png',
		type: 'image',
		use: 'spritesheet',
		size: 20.7
	}, {		//1
		filename: 'volume.png',
		type: 'image',
		use: 'spritesheet',
		size: 0.867,
		framex: 50,
		framey: 40
	}, {		//2
		filename: 'opt.png',
		type: 'image',
		use: 'spritesheet',
		size: 0.309
	}, {		//3
		filename: 'controls.png',
		type: 'image',
		use: 'spritesheet',
		size: 6.82,
		framex: 50,
		framey: 40
	}, {		//4
		filename: 'toucharrows.png',
		type: 'image',
		use: 'spritesheet',
		framewidth: 2,
		frameheight: 4,
		size: 11.6
	}, {		//5
		filename: 'tony.png',
		type: 'image',
		use: 'spritesheet',
		framex: 174,
		framey: 250,
		size: 12.6
	}, {		//6
		filename: 'room1/front_bg.png',
		type: 'image',
		use: 'background',
		size: 197
	}, {		//7
		filename: 'room1/front_bed.png',
		type: 'image',
		use: 'spritesheet',
		size: 7.8
	}, {		//8
		filename: 'room1/front_desk.png',
		type: 'image',
		use: 'spritesheet',
		framex: 412,
		framey: 340,
		size: 7.1
	}, {		//9
		filename: 'room1/front_hitbox.png',
		type: 'image',
		use: 'hitbox',
		monochrome: true,
		scale: 2,
		offset: {x:100,y:225},
		filler: 0,
		size: 11.2
	}, {		//10
		filename: 'psyche.png',
		type: 'image',
		use: 'spritesheet',
		framewidth: 2,
		frameheight: 2,
		size: 8
	}, {		//11
		filename: 'dialog.txt',
		type: 'text',
		use: 'dialog',
		size: 20
	}, {		//12
		filename: 'room1/rear_hitbox.png',
		type: 'image',
		use: 'hitbox',
		monochrome: true,
		filler: 0,
		offset: {x:75,y:225},
		scale: 2,
		size: 12
	}, {		//13
		filename: 'room1/rear_bg.png',
		type: 'image',
		use: 'background',
		size: 320
	}, {		//14
		filename: 'swap.png',
		type: 'image',
		use: 'spritesheet',
		framewidth: 2,
		frameheight: 1,
		size: 5
	}, {		//15
		filename: 'computer/bg.png',
		type: 'image',
		use: 'background',
		size: 10
	}, {		//16
		filename: 'computer/frame.png',
		type: 'image',
		use: 'background',
		size: 10
	}, {		//17
		filename: 'computer/apps.png',
		type: 'image',
		use: 'spritesheet',
		size: 10,
		framewidth: 3,
		frameheight: 2
	}, {		//18
		filename: 'room1/door.png',
		type: 'image',
		use: 'spritesheet',
		size: 4.1
	}, {		//19
		type: 'meta',
		use: 'quiltdata',
		patchx: 500,
		patchy: 500,
		width: 3000,
		height: 2000
	},
	{}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {		//20-43
	}, {		//44
		filename: 'outside/hitbox.png',
		type: 'image',
		use: 'hitbox',
		monochrome: true,
		filler: 0,
		scale: 2,
		size: 15.6
	}, {		//45
		filename: 'outside/house.png',
		type: 'image',
		use: 'background',
		size: 85.6
	}, {		//46
		filename: 'outside/tony-small.png',
		type: 'image',
		use: 'spritesheet',
		framex: 87,
		framey: 125,
		size: 18.7
	}, {		//47
		filename: 'outside/fence-front.png',
		type: 'image',
		use: 'background',
		size: 105
	}, {		//48
		filename: 'outside/ramp.png',
		type: 'image',
		use: 'background',
		size: 14.5
	}, {		//49
		filename: 'outside/porch.png',
		type: 'image',
		use: 'background',
		size: 24.7
	}, {		//50
		filename: 'outside/awning.png',
		type: 'image',
		use: 'background',
		size: 46.8
	}, {		//51
		filename: 'outside/gramma.png',
		type: 'image',
		use: 'spritesheet',
		framex: 97,
		framey: 169,
		size: 8.5
	}, {		//52
		filename: 'room1/front_cabinet.png',
		type: 'image',
		use: 'spritesheet',
		size: 2.2
	}, {		//53
		filename: 'room1/rear_bed.png',
		type: 'image',
		use: 'spritesheet',
		size: 5.7
	}, {		//54
		filename: 'room1/rear_desk.png',
		type: 'image',
		use: 'spritesheet',
		framex: 465,
		framey: 373,
		size: 7.1
	}, {		//55
		filename: 'room1/rear_bookshelf.png',
		type: 'image',
		use: 'spritesheet',
		size: 2.1
	}, {		//56
		filename: 'computer/chumnames.png',
		type: 'image',
		use: 'spritesheet',
		framewidth: 1,
		frameheight: 6,
		size: 7.5
	}, {		//57
		filename: 'computer/chumrollback.png',
		type: 'image',
		use: 'spritesheet',
		framewidth: 1,
		frameheight: 1,
		size: 3.2
	}, {		//58
		filename: 'computer/homebtn.png',
		type: 'image',
		use: 'spritesheet',
		framewidth: 1,
		frameheight: 1,
		size: 1.6
	}, {		//59
		filename: 'computer/notify.png',
		type: 'image',
		use: 'spritesheet',
		framewidth: 1,
		frameheight: 1,
		size: 1.1
	}, {		//60
		filename: 'computer/pc-bigbox.png',
		type: 'image',
		use: 'spritesheet',
		framewidth: 1,
		frameheight: 1,
		size: 2.2
	}, {		//61
		filename: 'computer/pccard.png',
		type: 'image',
		use: 'spritesheet',
		framewidth: 1,
		frameheight: 1,
		size: 2.8
	}, {		//62
		filename: 'computer/pcmood.png',
		type: 'image',
		use: 'spritesheet',
		framewidth: 1,
		frameheight: 1,
		size: 2.7
	}, {		//63
		filename: 'computer/pc-text.png',
		type: 'image',
		use: 'spritesheet',
		framewidth: 1,
		frameheight: 1,
		size: 1.5
	}, {		//64
		filename: 'computer/ie-bottom.png',
		type: 'image',
		use: 'spritesheet',
		framewidth: 1,
		frameheight: 1,
		size: 11.7
	}, {		//65
		filename: 'computer/ie-top.png',
		type: 'image',
		use: 'spritesheet',
		framewidth: 1,
		frameheight: 1,
		size: 16.6
	}, {		//66
		filename: 'computer/urls.png',
		type: 'image',
		use: 'spritesheet',
		framewidth: 1,
		frameheight: 2,
		size: 3
	}, {		//67
		filename: 'computer/da.png',
		type: 'image',
		use: 'background',
		size: 356
	}, {		//68
		filename: 'computer/tabhighlight.png',
		type: 'image',
		use: 'spritesheet',
		framewidth: 1,
		frameheight: 1,
		size: 0.2
	}, {		//69
		filename: 'hall1/bg.png',
		type: 'image',
		use: 'background',
		size: 36.5
	}, {		//70
		filename: 'hall1/hitbox.png',
		type: 'image',
		use: 'hitbox',
		monochrome: true,
		size: 5.8,
		scale: 2,
		offset: {x:0,y:200},
		filler: 0
	}, {		//71
		filename: 'hall1/wall.png',
		type: 'image',
		use: 'background',
		size: 2.9
	}, {		//72
		filename: 'room2/front_bg.png',
		type: 'image',
		use: 'background',
		size: 29.1
	}, {		//73
		filename: 'room2/rear_bg.png',
		type: 'image',
		use: 'background',
		size: 12
	}, {		//74
		filename: 'room2/front_hitbox.png',
		type: 'image',
		use: 'hitbox',
		monochrome: true,
		filler: 0,
		offset: {x:100,y:270},
		scale: 2,
		size: 8.4
	}, {		//75
		filename: 'door.png',
		type: 'image',
		use: 'spritesheet',
		framex: 150,
		framey: 384,
		size: 1.1
	}, {		//76
		filename: 'room3/front_bg.png',
		type: 'image',
		use: 'background',
		size: 39.7
	}, {		//77
		filename: 'room3/rear_bg.png',
		type: 'image',
		use: 'background',
		size: 67
	}, {		//78
		filename: 'room3/front_hitbox.png',
		type: 'image',
		use: 'hitbox',
		monochrome: true,
		filler: 0,
		scale: 2,
		offset: {x:0, y:200},
		size: 5.4
	}, {		//79
		filename: 'kitchen/front_bg.png',
		type: 'image',
		use: 'background',
		size: 39.7
	}, {		//80
		filename: 'kitchen/rear_bg.png',
		type: 'image',
		use: 'background',
		size: 7.8
	}, {		//81
		filename: 'kitchen/front_hitbox.png',
		type: 'image',
		use: 'hitbox',
		monochrome: true,
		filler: 0,
		scale: 2,
		offset: {x:0,y:200},
		size: 4.8
	}, {		//82
		filename: 'kitchen/rear_hitbox.png',
		type: 'image',
		use: 'hitbox',
		monochrome: true,
		filler: 0,
		scale: 2,
		offset: {x:0,y:200},
		size: 4.8
	}, {		//83
		filename: 'hall2/front_bg.png',
		type: 'image',
		use: 'background',
		size: 39.7
	}, {		//84
		filename: 'hall2/front_sidedoor.png',
		type: 'image',
		use: 'spritesheet',
		size: 7.8
	}, {		//85
		filename: 'hall2/rear_bg.png',
		type: 'image',
		use: 'background',
		size: 7.8
	}, {		//86
		filename: 'hall2/front_hitbox.png',
		type: 'image',
		use: 'hitbox',
		monochrome: true,
		filler: 0,
		scale: 2,
		offset: {x:0,y:200},
		size: 4.8
	}, {		//87
		filename: 'hall2/rear_hitbox.png',
		type: 'image',
		use: 'hitbox',
		monochrome: true,
		filler: 0,
		scale: 2,
		offset: {x:0,y:200},
		size: 4.8
	}, {		//88
		filename: 'bath/bg.png',
		type: 'image',
		use: 'background',
		size: 118
	}, {		//89
		filename: 'living/rear_hitbox.png',
		type: 'image',
		use: 'hitbox',
		size: 11.2,
		monochrome: true,
		filler: 0,
		offset: {x:0,y:400}
	}, {		//90
		filename: 'bath/hitbox.png',
		type: 'image',
		use: 'hitbox',
		monochrome: true,
		offset: {x:125,y:450},
		filler: 0,
		size: 2.9
	}, {		//91
		filename: 'living/front_bg.png',
		type: 'image',
		use: 'background',
		size: 20
	}, {		//92
		filename: 'living/rear_bg.png',
		type: 'image',
		use: 'background',
		size: 20
	}, {		//93
		filename: 'living/front_hitbox.png',
		type: 'image',
		use: 'hitbox',
		size: 11.1,
		monochrome: true,
		offset: {x:0, y:400},
		filler: 0
	}, {		//94
		filename: 'braddialog.png',
		type: 'image',
		use: 'spritesheet',
		size: 26.7,
		framex: 300,
		framey: 400
	}, {		//95
		filename: 'bachdialog.png',
		type: 'image',
		use: 'spritesheet',
		size: 14.5,
		framex: 300,
		framey: 400
	}, {		//96
		filename: 'ginadialog.png',
		type: 'image',
		use: 'spritesheet',
		size: 27.4,
		framex: 300,
		framey: 400
	}, {		//97
		filename: 'tonydialog.png',
		type: 'image',
		use: 'spritesheet',
		size: 27.2,
		framex: 300,
		framey: 400
	}, {		//98
		filename: 'room1/ginagift.png',
		type: 'image',
		use: 'spritesheet',
		size: 1.1
	}, {		//99
		filename: 'hall1/dollshelf.png',
		type: 'image',
		use: 'spritesheet',
		size: 6
	}, {		//100
		filename: 'hall1/case.png',
		type: 'image',
		use: 'spritesheet',
		size: 9
	}, {		//101
		filename: 'room2/bird.png',
		type: 'image',
		use: 'spritesheet',
		size: 10
	}, {		//102
		filename: 'room2/rear_bed.png',
		type: 'image',
		use: 'spritesheet',
		size: 10
	}, {		//103
		filename: 'room2/rear_bureau.png',
		type: 'image',
		use: 'spritesheet',
		size: 10
	}, {		//104
		filename: 'room2/rear_hitbox.png',
		type: 'image',
		use: 'hitbox',
		size: 10,
		monochrome: true,
		offset: {x:80,y:220},
		filler: 0,
		scale: 2
	}, {		//105
		filename: 'stool.png',
		type: 'image',
		use: 'spritesheet',
		size: 1
	}, {		//106
		filename: 'stoolhitbox.png',
		type: 'image',
		use: 'hitbox',
		monochrome: true,
		size: 10
	}, {		//107
		filename: 'room2/flower.png',
		type: 'image',
		use: 'spritesheet',
		framewidth: 2,
		frameheight: 1,
		size: 10
	}, {		//108
		filename: 'captcha.png',
		type: 'image',
		use: 'spritesheet',
		size: 1.1
	}, {		//109
		filename: 'specibus.png',
		type: 'image',
		use: 'spritesheet',
		size: 1.4
	}, {		//110
		filename: 'stoolmini.png',
		type: 'image',
		use: 'spritesheet',
		size: 1.4
	}, {		//111
		filename: 'room3/chandelier.png',
		type: 'image',
		use: 'spritesheet',
		size: 66.4
	}, {		//112
		filename: 'room3/cube.png',
		type: 'image',
		use: 'spritesheet',
		size: 1
	}, {		//113
		filename: 'room3/front_case.png',
		type: 'image',
		use: 'spritesheet',
		size: 86.9
	}, {		//114
		filename: 'room3/front_green.png',
		type: 'image',
		use: 'spritesheet',
		size: 88.5
	}, {		//115
		filename: 'room3/rear_case.png',
		type: 'image',
		use: 'spritesheet',
		size: 81.9
	}, {		//116
		filename: 'room3/rear_green.png',
		type: 'image',
		use: 'spritesheet',
		size: 92.8
	}, {		//117
		filename: 'room3/rear_hitbox.png',
		type: 'image',
		use: 'hitbox',
		monochrome: true,
		offset: {x:0,y:200},
		filler: 0,
		scale: 2,
		size: 4.1
	}, {		//118
		filename: 'room3/table.png',
		type: 'image',
		use: 'spritesheet',
		size: 68.6
	}, {		//119
		filename: 'kitchen/rear_table.png',
		type: 'image',
		use: 'spritesheet',
		size: 29.6
	}, {		//120
		filename: 'kitchen/rear_shelf.png',
		type: 'image',
		use: 'spritesheet',
		size: 1.6
	}, {		//121
		filename: 'kitchen/front_table.png',
		type: 'image',
		use: 'spritesheet',
		size: 29.7
	}, {		//122
		filename: 'kitchen/front_counter.png',
		type: 'image',
		use: 'spritesheet',
		size: 3.4
	}, {		//123
		filename: 'kitchen/front_cabinets.png',
		type: 'image',
		use: 'spritesheet',
		size: 3.2
	}, {		//124
		filename: 'kitchen/cupcakes.png',
		type: 'image',
		use: 'spritesheet',
		size: 29.6,
		framewidth: 13,
		frameheight: 2
	}, {		//125
		filename: 'living/rear_television.png',
		type: 'image',
		use: 'spritesheet',
		size: 38.4
	}, {		//126
		filename: 'living/rear_bookcase.png',
		type: 'image',
		use: 'background',
		size: 296
	}, {		//127
		filename: 'living/front_television.png',
		type: 'image',
		use: 'spritesheet',
		size: 34.8
	}, {		//128
		filename: 'living/front_bookcase.png',
		type: 'image',
		use: 'background',
		size: 260
	}, {		//129
		filename: 'living/coffeetable.png',
		type: 'image',
		use: 'spritesheet',
		size: 47.3
	}, {		//130
		filename: 'living/chairrear.png',
		type: 'image',
		use: 'spritesheet',
		size: 40
	}, {		//131
		filename: 'living/chairfront.png',
		type: 'image',
		use: 'spritesheet',
		size: 36.1
	}, {		//132
		filename: 'grammadialog.png',
		type: 'image',
		use: 'spritesheet',
		size: 3.2,
		framex: 300,
		framey: 400
	}, {		//133
		filename: 'table.png',
		type: 'image',
		use: 'spritesheet',
		size: 49.3,
		framewidth: 2,
		frameheight: 1
	}, {		//134
		filename: 'kitchen/rear_tablepatch.png',
		type: 'image',
		use: 'hitbox',
		monochrome: true,
		size: 0.5
	}, {		//135
		filename: 'kitchen/front_tablepatch.png',
		type: 'image',
		use: 'hitbox',
		monochrome: false,
		size: 0.4
	}, {		//136
		filename: 'outside/tablehitpatch.png',
		type: 'image',
		use: 'hitbox',
		monochrome: true,
		size: 0.3
	}, {		//137
		filename: 'ComicSans.ttf',			//mwahahaha
		type: 'font',
		format: 'truetype',
		name: 'Comic Sans',
		size: 74
	}, {		//138
		filename: 'room1/bubble.png',
		type: 'image',
		use: 'spritesheet',
		size: 1
	}, {		//139
		filename: 'room1/bradgift.png',
		type: 'image',
		use: 'spritesheet',
		size: 21
	}, {		//140
		filename: 'room1/bachgift.png',
		type: 'image',
		use: 'spritesheet',
		size: 41.6
	}, {		//141
		filename: 'room3/envelope.png',
		type: 'image',
		use: 'spritesheet',
		size: 1.3
	}, {		//142
		filename: 'outside/ticket.png',
		type: 'image',
		use: 'spritesheet',
		size: 0.8
	}, {		//143
		filename: 'passport.png',
		type: 'image',
		use: 'spritesheet',
		size: 0.6
	}, {		//144
		filename: 'key.png',
		type: 'image',
		use: 'spritesheet',
		size: 1.8
	}, {		//145
		filename: 'Sunrise',
		extensions: ['mp3','ogg'],
		type: 'audio',
		use: 'bgm',
		size: 1200
	}, {		//146
		filename: 'computer/ao3.png',
		type: 'image',
		use: 'background',
		size: 682
	}, {		//147
		filename: 'getitem',
		extensions: ['ogg','mp3'],
		type: 'audio',
		use: 'sfx',
		size: 16
	}
];


var i, allrecs = [];
for (i = 0; i < g.resources.length; i++) {
	allrecs[i] = i;
}

var urecs = [0,1,2,3,4,5,11,14,75,94,95,96,97,105,106,108,109,110,132,133,137,143,144,145,147];
var group1recs = [6,7,8,9,10,12,13,15,16,17,18,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,98,99,100,101,102,103,104,107,138,139,140,146].concat(urecs);
var group2recs = [76,77,78,79,80,81,82,83,84,85,86,87,88,90,111,112,113,114,115,116,117,118,119,120,121,122,123,124,134,135,141].concat(urecs);
var group3recs = [19,44,45,46,47,48,49,50,51,89,91,92,93,125,126,127,128,129,130,131,136,142].concat(urecs);
	
	
function qdata(name, start, width, height, except) {
	var i, j, n, h, inout, out = [];
	for (i = 0; i < height; i++) {
		inout = [];
		for (j = 0; j < width; j++) {
			n = i * width + j;
			h = n + start + 1;
			if (typeof except[n] === 'number') {
				n = except[n];
			} else {
				g.resources[h] = {
					filename: name + (n + 1) + '.png',
					type: 'image',
					use: 'background',
					size: 20
				};
			}
			inout[j] = n + start + 1;
		}
		out[i] = inout;
	}
	g.resources[start].data = out;
}

qdata('outside/quilt/bg_', 19, 6, 4, {});

g.dialog.box = {
	rec: 0,
	margintop: 170,
	marginside: 25,
	paddingtop: 13,
	paddinglargeside: 150,
	paddingsmallside: 20
};
g.dialog.prefs = {
	Brad: {
		spritesheet: 94,
		color: '#56AAFF',
		states: {
			neutral: { frames: [0], timing: 60 },
			jawdrop: { frames: [1], timing: 60 },
			talk: { frames: [0, 1], timing: 20 },
			smile: { frames: [2], timing: 60 },
			colond: { frames: [3], timing: 60 },
			smiletalk: { frames: [2, 3], timing: 20 },
			disapprove: { frames: [4], timing: 60 },
			disapprovetalk: { frames: [4, 5], timing: 20 },
			really: { frames: [6], timing: 60 },
			reallytalk: { frames: [6, 7], timing: 20 },
			snooty: { frames: [8], timing: 60 },
			snootytalk: { frames: [8, 9], timing: 20 },
			daydream: { frames: [10], timing: 60 },
			airquotes: { frames: [12, 13], timing: 30 },
			deadpan: { frames: [11], timing: 60 },
			deadpantalk: { frames: [11, 14], timing: 20 },
			shock: { frames: [15], timing: 60 },
			nervous: { frames: [16], timing: 60 },
			nervoustalk: { frames: [16, 17], timing: 20 },
			uhoh: { frames: [18], timing: 60 },
			shoot: { frames: [19], timing: 60 },
			flipout: { frames: [19, 21, 20, 21], timing: 5 }
		}
	},
	Bach: {
		spritesheet: 95,
		color: '#FFD117',
		states: {
			neutral: { frames: [0], timing: 60 },
			colond: { frames: [1], timing: 60 },
			talk: { frames: [0, 1], timing: 20 },
			hmmm: { frames: [2], timing: 60 },
			excited: { frames: [3], timing: 60 },
			eeee: { frames: [3, 4, 5, 4, 3, 5, 4, 5], timing: 3 },
			happy: { frames: [6], timing: 60 },
			hehehe: { frames: [6, 8], timing: 10 },
			daydream: { frames: [9], timing: 60 },
			awesome: { frames: [10], timing: 60 },
			daydreamtalk: { frames: [9, 10], timing: 20 },
			serious: { frames: [11], timing: 60 },
			serioustalk: { frames: [11, 12], timing: 20 },
			nervous: { frames: [13], timing: 60 },
			nervoustalk: { frames: [15, 14], timing: 20 },
			argh: { frames: [16], timing: 60 },
			bigargh: { frames: [17], timing: 60 }
		}
	},
	Gina: {
		spritesheet: 96,
		color: '#7C1614',
		states: {
			disapprove: { frames: [0], timing: 60 },
			neutral: { frames: [1], timing: 60 },
			talk: { frames: [1, 2], timing: 20 },
			smile: { frames: [3], timing: 60 },
			facepalm: { frames: [4], timing: 60 },
			smiletalk: { frames: [3, 7], timing: 20 },
			facepalmtalk: { frames: [4, 5], timing: 20 },
			disapprovetalk: { frames: [0, 6], timing: 20 },
			notsureifwant: { frames: [8], timing: 60 },
			really: { frames: [9], timing: 60 },
			nervous: { frames: [10], timing: 60 },
			nervoustalk: { frames: [10, 11], timing: 20 },
			hopeful: { frames: [12], timing: 60 },
			hopefultalk: { frames: [12, 13], timing: 20 },
			evil: { frames: [14], timing: 60 },
			eyebrows: { frames: [14, 15, 16, 17, 16, 15], timing: 2 }
		}
	},
	Tony: {
		spritesheet: 97,
		color: '#936394',
		states: {
			neutral: {frames: [3], timing: 60 },
			talk: { frames: [3, 4], timing: 20},
			smile: { frames: [0], timing: 60 },
			smiletalk: { frames: [0, 2], timing: 20 },
			happy: { frames: [1], timing: 60},
			colond: { frames: [2], timing: 60 },
			daydream: { frames: [5], timing: 60},
			eyeroll: { frames: [6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 7, 8, 9, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11], timing: 5},
			thinktalk: { frames: [8, 12], timing: 20 },
			disappoint: { frames: [13], timing: 60 },
			ew: { frames: [14], timing: 60 },
			jawdrop: { frames: [4], timing: 60},
			glare: { frames: [15], timing: 60},
			deadpan: { frames: [16], timing: 60},
			wat: { frames: [17], timing: 60}
		}
	},
	'_': {
		color: 'black',
		states: {'_': {frames: []}}
	},
	Gramma: {
		spritesheet: 132,
		color: '#00BA6C',
		states: {
			'neutral': {frames: [0], timing: 60 }
		}
	}
};

g.ui.volrec = 1;
g.ui.optrec = 2;
g.ui.controlsrec = 3;

g.ui.controlsdlg = 'controls';
g.ui.aboutdlg = 'about';

g.ui.volrect = new Rectangle(20, 10, 50, 40, true);
g.ui.optrect = new Rectangle(530, 10, 31, 40, true);
g.ui.controlsrect = new Rectangle(580, 10, 50, 40, true);

g.area.currentarea = 0;

g.gfx.pixels = {
	0x000000: 0,
	0xFFFFFF: 1
};

g.controls.buttons = ['left', 'right', 'up', 'down', 'space'];
g.controls.keysets = [
	{
		name: 'Arrow Keys',
		description: 'Arrow keys to move. Spacebar (or click, assuing space would work also) to interact with things.',
		type: 'keyboard',
		left: 37,
		right: 39,
		up: 38,
		down: 40,
		space: 32
	}, {
		name: 'WASD Keys',
		description: 'WASD keys to move. Spacebar (or click, assuming space would work also) to interact with things.',
		type: 'keyboard',
		left: 65,
		right: 68,
		up: 87,
		down: 83,
		space: 32
	}, {
		name: 'Touch input',
		description: 'Use the onscreen keys to move around. Tap on things to interact with them, assuming your character is in range to do so. If you\'re having trouble getting through a door, tap on its base.',
		type: 'touch',
		controls: ['leftbtn', 'rightbtn', 'upbtn', 'downbtn'],
		left: function (ks) {return ks.leftbtn.pressed; },
		right: function (ks) {return ks.rightbtn.pressed; },
		up: function (ks) {return ks.upbtn.pressed; },
		down: function (ks) {return ks.downbtn.pressed; },
		upbtn: {
			type: 'button',
			active: false,
			pressed: false,
			sprite: 4,
			startframe: 0,
			x: 300,
			y: 0,
			dim: new Rectangle(300, 22, 77, 35, true)
		},
		downbtn: {
			type: 'button',
			active: false,
			pressed: false,
			sprite: 4,
			startframe: 6,
			x: 300,
			y: 373,
			dim: new Rectangle(300, 395, 77, 35, true)
		},
		leftbtn: {
			type: 'button',
			active: false,
			pressed: false,
			sprite: 4,
			startframe: 2,
			x: 0,
			y: 190,
			dim: new Rectangle(23, 190, 35, 77, true)
		},
		rightbtn: {
			type: 'button',
			active: false,
			pressed: false,
			sprite: 4,
			startframe: 4,
			x: 573,
			y: 190,
			dim: new Rectangle(596, 190, 35, 77, true)
		}
	}
];

g.area.funcs = {
	hswalk: function (ca) {
		var i, j, p, sen, t;
		g.gfx.draw(ca.bg, ca.x, ca.y, 0, g.gfx.layers.bg);
		for (i = 0; i < ca.objects.length; i++) {											//draw each 'object'
			j = ca.objects[i];
			if (!j.f) {
				j.f = 0;
			}
			if (typeof j.a === 'undefined') {
				j.a = 100;
			} else if (j.aopt && j.aopt == 'fadebehind') {
				p = ca.sprites[0].y + 206;
				if (p > j.p && j.a < 100) {
					j.a += 2;
				} else if (p < j.p && j.a > 0) {
					j.a -= 2;
				}
			}
			p = j.p;
			if (typeof p === 'function') {
				p = p();
			}
			g.gfx.fbdraw(j.recid, j.x, j.y, j.f, p, {x: j.flipx, y: false}, j.a / 100);
		}
		p = ca.sprites[ca.player];
		t = p.x - ca.x;
		if (t < 100) {			//scroll left
			ca.x = p.x - 100;
		} else if (t > 400) {		//scroll right
			ca.x = p.x - 400;
		}
		t = p.y - ca.y;
		if (t < 25) {				//scroll up
			ca.y = p.y - 25;
		} else if (t > 200) {		//scroll down
			ca.y = p.y - 200;
		}
		
		sen = false;
		if (!g.frozen && ca.twin) {
			sen = g.area.funcs.canswap(ca, g.area.areas[ca.twin]);
		}
		g.gfx.draw(14, 100, 15, (sen ? 0 : 1), g.gfx.layers.ui);
		if (sen && g.controls.istouch(new Rectangle(100, 15, 30, 30, true))) {
			g.area.currentarea = g.area.areas[g.area.currentarea].twin;		//god help us
		}
		g.area.funcs.getthing.process();
		g.area.funcs.captcha.dispspecibus();
	},
	canswap: function (ca, ta) {
		var t = g.area.currentarea;
		g.area.currentarea = ca.twin;
		ta.onSwap(ca, ta);
		if (g.sprites.func.hitgen(ta.sprites[0], ['top', 'bottom', 'left', 'right'], function (px, num, name) {
				if (px == 0) {
					return 'stop';
				}
			}) == 'stopped') {
			g.area.currentarea = t;
			return false;
		}
		g.area.currentarea = t;
		return true;
	},
	doent: function (ca, ent) {
		var tent = ca.ents[ent];
		if (tent) {
			ca.x = tent[0];
			ca.y = tent[1];
			ca.sprites[0].x = tent[2];
			ca.sprites[0].y = tent[3];
			ca.sprites[0].faceleft = tent[4];
			ca.sprites[0].faceback = tent[5];
			ca.sprites[0].xspd = ca.sprites[0].yspd = ca.sprites[0].frame = 0;
		}
	},
	getthing: {
		init: function (recid, x, y, dialog, callback, frame) {
			var rec;
			g.frozen = true;
			g.audio.play(147);
			if (!g.resources[recid] || !g.resources[recid].loaded || g.resources[recid].type != 'image' || g.resources[recid].use != 'spritesheet') {
				console.log('Warning: resourse #' + recid + ' unusable for showitem!');
				if (dialog && dialog != '') {
					g.dialog.show(dialog, callback);
				} else if (callback) {
					callback();
				}
				return;
			}
			rec = g.resources[recid];
			if (!frame) { frame = 0; }
			if (!callback) { callback = function () {}; }
			g.area.funcs.getthing.recid = recid;
			g.area.funcs.getthing.frame = frame;
			g.area.funcs.getthing.x = Math.floor(x - (rec.framex / 2));
			g.area.funcs.getthing.y = Math.floor(y - (rec.framey / 2));
			g.area.funcs.getthing.timer = 30;
			g.area.funcs.getthing.dialog = dialog;
			g.area.funcs.getthing.callback = callback;
			g.area.funcs.getthing.active = true;
		},
		active: false,
		process: function () {
			if (!g.area.funcs.getthing.active) { return; }
			if (g.area.funcs.getthing.timer != 0) { g.area.funcs.getthing.timer--; }
			if (g.area.funcs.getthing.timer == 1) {
				g.timeouts.addtimeout(30, function () {
					if (g.area.funcs.getthing.dialog && g.area.funcs.getthing.dialog !== '') {
						g.dialog.show(g.area.funcs.getthing.dialog, function () { g.area.funcs.getthing.active = false; g.area.funcs.getthing.callback(); });
					} else if (g.area.funcs.getthing.callback) {
						g.area.funcs.getthing.active = false;
						g.area.funcs.getthing.callback();
					}
				}, false);
			}
			g.gfx.draw(g.area.funcs.getthing.recid, g.area.funcs.getthing.x, g.area.funcs.getthing.y - 60 + (g.area.funcs.getthing.timer * 2), g.area.funcs.getthing.frame, g.gfx.layers.prioritysprites);
		},
		recid: 0,
		frame: 0,
		x: 0,
		y: 0,
		timer: 0
	},
	hitcomposite: function (x, y) {
		var i, n;
		if (!g.area.areas[g.area.currentarea].hitpatches) {
			g.area.areas[g.area.currentarea].hitpatches = [];
		}
		for (i = 0; i < g.area.areas[g.area.currentarea].hitpatches.length; i++) {
			n = g.area.areas[g.area.currentarea].hitpatches[i];
			if (n && n.dim.hitPoint(x - n.x, y - n.y)) {
				return g.loading.getHitboxData(n.recid, x - n.x, y - n.y);
			}
		}
		return g.loading.getHitboxData(g.area.areas[g.area.currentarea].hitbox, x, y);
	},
	captcha: {
		take: function (n, x, y, callback) {
			g.frozen = true;
			g.area.funcs.captcha.has[n] = true;
			g.timeouts.addtimeout(210, function (timert) {
				var sx, sy, timer, t;
				timer = 210 - timert;
				if (timer == 2 || timer == 4) {
					sx = x + 2;
					sy = y + 2;
				} else if (timer == 3) {
					sx = x + 3;
					sy = y + 3;
				} else if (timer < 30) {
					sx = x;
					sy = y;
				} else if (timer < 40) {
					t = timer - 30;
					t = Math.floor(t / 3) * 3;
					sx = x - (x - 10) * t / 10;
					sy = y - (y - 10) * t / 10;
				} else if (timer == 40 || timer == 42) {
					sx = sy = 8;
				} else if (timer == 41) {
					sx = sy = 7;
				} else if (timer == 140 || timer == 142) {
					sx = sy = 12;
				} else if (timer == 141) {
					sx = sy = 13;
				} else if (timer < 200) {
					sx = sy = 10;
				} else {
					t = timer - 200;
					t = Math.floor(t / 3) * 3;
					sx = 10;
					sy = 10 - t * 20;
				}
				g.gfx.draw(108, sx, sy, 0, g.gfx.layers.dialog);
				g.gfx.draw(g.area.funcs.captcha.ndata[n][0], sx + 40, sy + 55, g.area.funcs.captcha.ndata[n][1], g.gfx.layers.dialog);
				if (timer > 139) {
					g.gfx.drawfunc(function () {
						g.c.fillStyle = '#936396';
						g.c.font = '38px verdana bold';
						g.c.fillText(n, sx + 25, sy + 111);
					}, g.gfx.layers.dialog);
				}
				if (timer == 210) {
					g.frozen = false;
					if (g.area.funcs.captcha.init) {
						if (typeof callback == 'function') { callback(); }
					} else {
						g.dialog.show('captchainit', callback);
						g.area.funcs.captcha.init = true;
					}
				}
			}, true);
		},
		ndata: {
			0: [1, 0],
			14: [107, 0],
			3: [101, 0],
			111: [110, 0],
			104: [133, 1],
			49: [141, 0],
			920: [143, 0]
		},
		has: {},
		init: false,
		put: function (n, x, y, callback) {
			g.area.funcs.captcha.has[n] = false;
			g.frozen = true;
			g.timeouts.addtimeout(60, function (timert) {
				var t, sx, sy, timer = 60 - timert;
				if (timer < 10) {
					t = Math.floor(timer / 3) * 3;
					sx = -150 + ((x + 150) * t / 10);
					sy = -150 + ((y + 150) * t / 10);
				} else if (timer == 10 || timer == 12) {
					sx = x + 2;
					sy = y + 2;
				} else if (timer == 11) {
					sx = x + 3;
					sy = y + 3;
				} else {
					sx = x;
					sy = y;
				}
				if (timer < 40 || timer % 6 < 3) {
					g.gfx.draw(108, sx, sy, 0, g.gfx.layers.dialog);
				}
				g.gfx.draw(g.area.funcs.captcha.ndata[n][0], sx + 40, sy + 55, g.area.funcs.captcha.ndata[n][1], g.gfx.layers.dialog);
				if (timer < 10) {
					g.gfx.drawfunc(function () {
						g.c.fillStyle = '#936396';
						g.c.font = '38px verdana bold';
						g.c.fillText(n, sx + 25, sy + 111);
					}, g.gfx.layers.dialog);
				}
				if (timer == 60) {
					g.frozen = false;
					if (typeof callback === 'function') { callback(); }
				}
			}, true);
		},
		specout: false,
		showspecibus: function () {
			g.timeouts.addtimeout(10, function (timer) {
				g.gfx.draw(109, 490 + 15 * timer, 10, 0, g.gfx.layers.ui);
				if (timer == 0) {
					g.area.funcs.captcha.specout = true;
				}
			}, true);
		},
		dispspecibus: function () {
			if (g.area.funcs.captcha.specout) {
				g.gfx.draw(109, 490, 10, 0, g.gfx.layers.ui);
			}
		},
		hidespecibus: function () {
			g.area.funcs.captcha.specout = false;
			g.timeouts.addtimeout(10, function (timer) {
				g.gfx.draw(109, 490 + 150 - 15 * timer, 10, 0, g.gfx.layers.ui);
			}, true);
		}
	}
};

g.sprites.func.hit = function (inst, point, offset) {		//override the hit function to patch in hitbox patches
	if (typeof offset != 'object') {
		offset = {x: 0, y: 0};
	}
	offset.x += inst.dim.x1 + inst.x;
	offset.y += inst.dim.y1 + inst.y;
	switch (point) {
	case 'center':
		offset.y += inst.dim.height / 2;
	case 'top':
		offset.x += inst.dim.width / 2;
		break;
	case 'bottom':
		offset.x += inst.dim.width / 2;
		offset.y += inst.dim.height;
		break;
	case 'bottomright':
		offset.x += inst.dim.width;
	case 'bottomleft':
		offset.y += inst.dim.height;
		break;
	case 'right':
		offset.x += inst.dim.width;
	case 'left':
		offset.y += inst.dim.height / 2;
		break;
	case 'righttop':
		offset.x += inst.dim.width;
	case 'lefttop':
		offset.y += 20;
		break;
	case 'rightbottom':
		offset.x += inst.dim.width;
	case 'leftbottom':
		offset.y += inst.dim.height - 20;
		break;
	}
	if (g.resources[g.area.areas[g.area.currentarea].hitbox].type != 'image' || g.resources[g.area.areas[g.area.currentarea].hitbox].use != 'hitbox') {
		console.log('Warning: attempting to use asset without type:image/hitbox as hitbox!');
		return;
	}
	return g.area.funcs.hitcomposite(offset.x, offset.y);
};

g.area.areas = [
	{
		init: false,
		reclist: group1recs,
		onLoad: function () { g.ui.enabled = false; },
		onActivate: function () {
			g.timeouts.addtimeout(300, function (timer) {
				var frame = 0;
				if (timer > 260)
					frame = Math.floor((timer%6)/3);
				else if (timer > 180)
					frame = 1;
				else if (timer > 140)
					frame = Math.floor((timer%6)/3)+2;
				else
					frame = 3;
				if (timer == 30)
					g.area.loadarea(1, 'inout', 'white', 'start');
				g.gfx.draw(10, 107, 150, frame, 0);
				if (timer == 0)
					g.ui.enabled = true;
			}, true);
		},
		process: function () {}
	}, {
		reclist: group1recs,
		player: 0,
		x: 100,
		y: 304,
		bg: 6,
		hitbox: 9,
		ents: {
			door: [450, 50, 685, 338, true, false],
			ginagift: [496, 299, 754, 453, false, true]
		},
		onLoad: function (ent) {
			g.area.funcs.doent(g.area.areas[1], ent);
			g.gfx.setbgcolor('white');
		},
		onActivate: function () {
			if (!g.area.areas[1].init)
			{
				g.area.areas[1].init = true;
				//g.frozen = true;					//...?
				g.dialog.show('helloworld');
				g.audio.play(145);
			}
			else if (g.area.areas[4].sprites[2].playedcards && !g.area.areas[1].showngiftmsg)
			{
				g.area.areas[1].showngiftmsg = true;
				g.dialog.show('youvegotmail');
			}
		},
		process: function (ca) {
			g.area.funcs.hswalk(ca);
		},
		twin: 2,
		onSwap: function (ca, ta) {
			ta.sprites[0].y = 450 + 980 - (ca.sprites[0].y + 206) - 206;
			ta.sprites[0].x = 20 + 1230 - (ca.sprites[0].x + 85) - 85;
			ta.sprites[0].faceleft = !ca.sprites[0].faceleft;
			ta.sprites[0].faceback = !ca.sprites[0].faceback;
			ta.sprites[0].frametimer = ca.sprites[0].frametimer;
			ta.sprites[0].xspd = -ca.sprites[0].xspd;
			ta.sprites[0].yspd = -ca.sprites[0].yspd;
			ta.x = ca.x + ta.sprites[0].x - ca.sprites[0].x;
			ta.y = ca.y + ta.sprites[0].y - ca.sprites[0].y;
		},
		objects: [
			{	//bed
				recid: 7,
				x: 38,
				y: 581,
				p: 779
			}, {	//desk
				recid: 8,
				x: 809,
				y: 385,
				p: 621,
				f: 0
			}, {	//cabinet
				recid: 52,
				x: 597,
				y: 572,
				p: 970,
				a: 50
			}
		],
		sprites: [
			{
				index: 0,
				name: 'tony',
				dim: new Rectangle(30,180,110,53,true),
				x: 368,
				y: 439,
				xspd: 0,
				yspd: 0,
				xsub: 0,
				ysub: 0,
				faceleft: false,
				faceback: false,
				sheet: 5,
				frame: 0,
				frametimer: 0
			}, {
				name: 'bookcase',
				x: 421,
				y: 280,
				dim: new Rectangle(260,303)
			}, {
				name: 'examine',
				x: 83,
				y: 661,
				dim: new Rectangle(0,0,490,202,true),
				object: 'bed',
				dialog: 'examinebed'
			}, {
				name: 'examine',
				x: 232,
				y: 326,
				dim: new Rectangle(0,0,211,313,true),
				object: 'posters',
				dialog: 'examineposters'
			}, {
				name: 'area',
				x: 1018,
				y: 465,
				dim: new Rectangle(0,0,198,272,true),
				callback: function () {
					if (g.area.areas[3].chums[0].state == 0)
						g.query.queueoption('Examine gifts',function () {g.dialog.show('examinegifts');});
					else if (g.area.areas[4].sprites[2].playedcards && g.area.areas[1].objects[1].f == 2)
					{
						g.query.queueoption('Open Brad\'s gift',function () {
							g.area.areas[1].objects[1].f++;
							g.area.areas[2].objects[2].f++;
							g.area.funcs.getthing.init(139, 1127-g.area.areas[1].x, 464-g.area.areas[1].y, 'getbradgift');
						});
					}
					else if (g.area.areas[4].sprites[2].playedcards && g.area.areas[1].objects[1].f == 3)
					{
						g.query.queueoption('Open Bach\'s gift',function () {
							g.area.areas[1].objects[1].f++;
							g.area.funcs.getthing.init(140, 960-g.area.areas[1].x, 573-g.area.areas[1].y, 'getbachgift');
						});
					}
				}
			}, {
				name: 'area',
				x: 926,
				y: 380,
				dim: new Rectangle (0,0,143,336,true),
				option: 'Examine computer',
				callback: function () {
					if (g.area.areas[4].sprites[2].playedcards && g.area.areas[1].objects[1].f < 4)
						g.dialog.show('needtoopengiftsfirst');
					else
					{
						g.area.areas[1].sprites[0].xspd = 0;
						g.area.areas[1].sprites[0].yspd = 0;
						g.area.currentarea = 3;
						g.area.areas[3].last = 1;
						g.ui.enabled = false;
					}
				}
			}, {
				name: 'area',
				x: 656,
				y: 280,
				dim: new Rectangle(0,0,180,265,true),
				option: 'Exit',
				callback: function () {
					if (g.area.areas[3].chums[0].state == 0)
						g.dialog.notice('Nope! You still have more screwing around in here to do before you can proceed! :D');
					else if (g.area.areas[3].chums[0].pestering || g.area.areas[3].chums[1].pestering || g.area.areas[3].chums[2].pestering || g.area.areas[3].chums[1].state == 5)
						g.dialog.notice('Seriously? You want to try to leave the room when you\'ve got friends waiting to talk to you?');
					else if (g.area.areas[3].chums[1].state == 4)
					{
						g.frozen = true;
						g.area.areas[3].chums[2].pestering = true;
						g.timeouts.addtimeout(45, function () {
							g.frozen = false;
						});
					}
					else
						g.area.loadarea(5, 'inout', 'black', 'room');
				}
			}, {
				name: 'chatbubble',
				x: 818,
				y: 367
			}
		]
	}, {
		reclist: group1recs,
		player: 0,
		x: 0,
		y: 0,
		bg: 13,
		hitbox: 12,
		onLoad: function () {
			g.gfx.setbgcolor('white');
		},
		onActivate: function () {},
		process: function (ca) {
			g.area.funcs.hswalk(ca);
		},
		twin: 1,
		onSwap: function (ca, ta) {
			ta.sprites[0].y = 450 + 980 - (ca.sprites[0].y + 206) - 206;
			ta.sprites[0].x = 20 + 1230 - (ca.sprites[0].x + 85) - 85;
			ta.sprites[0].faceleft = !ca.sprites[0].faceleft;
			ta.sprites[0].faceback = !ca.sprites[0].faceback;
			ta.sprites[0].frametimer = ca.sprites[0].frametimer;
			ta.sprites[0].xspd = -ca.sprites[0].xspd;
			ta.sprites[0].yspd = -ca.sprites[0].yspd;
			ta.x = ca.x + ta.sprites[0].x - ca.sprites[0].x;
			ta.y = ca.y + ta.sprites[0].y - ca.sprites[0].y;
		},
		sprites: [
			{
				index: 0,
				name: 'tony',
				dim: new Rectangle(30,180,110,53,true),
				x: 368,
				y: 439,
				xspd: 0,
				yspd: 0,
				xsub: 0,
				ysub: 0,
				faceleft: false,
				faceback: false,
				sheet: 5,
				frame: 0,
				frametimer: 0
			}, {
				name: 'area',
				x: 326,
				y: 857,
				dim: new Rectangle(0,0,247,87,true),
				option: 'Exit',
				callback: function () {
					if (g.area.areas[3].chums[0].state == 0)
						g.dialog.notice('Nope! You still have more screwing around in here to do before you can proceed! :D');
					else if (g.area.areas[3].chums[0].pestering || g.area.areas[3].chums[1].pestering || g.area.areas[3].chums[2].pestering || g.area.areas[3].chums[1].state == 5)
						g.dialog.notice('Seriously? You want to try to leave the room when you\'ve got friends waiting to talk to you?');
					else if (g.area.areas[3].chums[1].state == 3)
					{
						g.frozen = true;
						g.area.areas[3].chums[2].pestering = true;
						g.timeouts.settimeout(45, function () {
							g.frozen = false;
						});
					}
					else
						g.area.loadarea(5, 'inout', 'black', 'room');
				}
			}, {
				name: 'examine',
				x: 483,
				y: 260,
				dim: new Rectangle(0,0,188,300,true),
				object: 'cabinet',
				dialog: 'examinecabinet'
			}, {
				name: 'examine',
				x: 726,
				y: 506,
				dim: new Rectangle(0,0,436,252,true),
				object: 'bed',
				dialog: 'examinebed'
			}, {
				name: 'examine',
				x: 703,
				y: 282,
				dim: new Rectangle(0,0,440,241,true),
				object: 'posters',
				dialog: 'examineposters2'
			}, {
				name: 'examine',
				x: 138,
				y: 280,
				dim: new Rectangle(0,0,329,379,true),
				object: 'posters',
				dialog: 'examineposters3'
			}, {
				name: 'area',
				x: 186,
				y: 525,
				dim: new Rectangle (0,0,153,201,true),
				option: 'Examine computer',
				callback: function () {
					if (g.area.areas[4].sprites[2].playedcards && g.area.areas[1].objects[1].f < 4)
						g.dialog.show('needtoopengiftsfirst');
					else
					{
						g.area.areas[2].sprites[0].xspd = 0;
						g.area.areas[2].sprites[0].yspd = 0;
						g.area.currentarea = 3;
						g.area.areas[3].last = 2;
						g.ui.enabled = false;
					}
				}
			}, {
				name: 'area',
				x: 96,
				y: 490,
				dim: new Rectangle(0,0,143,187,true),
				callback: function () {
					if (g.area.areas[3].chums[0].state == 0)
						g.query.queueoption('Examine gifts',function () {g.dialog.show('examinegifts');});
				}
			}, {
				name: 'chatbubble',
				x: 308,
				y: 529,
				flip: true
			}
		],
		objects: [
			{		//door
				recid: 18,
				x: 377,
				y: 515,
				p: 1000,
				a: 50
			}, {
				recid: 53,
				x: 732,
				y: 505,
				p: 656
			}, {
				recid: 54,
				x: 34,
				y: 493,
				p: 803
			}, {
				recid: 55,
				x: 606,
				y: 610,
				p: 970,
				a: 50
			}
		]
	}, {							//computer
		reclist: group1recs,
		process: function (ca)
		{
			for (var i = 0; i < 3; i++)
				if (ca.chums[i].pestering) ca.chums[i].online = true;
			if (ca.entering)
				ca.enter(ca);
			g.gfx.draw(15, 0, 0, 0, g.gfx.layers.bg);
			g.gfx.draw(16, 0, 0, 0, g.gfx.layers.ui);
			if (!g.frozen && g.controls.istouch(new Rectangle(614, 414, 30, 30, true)))
				ca.exiting = true;
			switch (ca.state) {
				case 0:				//boot up
				if (ca.entering)
					break;
				ca.timer++;
				if (ca.timer > 20)
				{
					for (var i = 0; i < 5; i++)
						g.gfx.draw(17, Math.ceil(ca.xps[i] - Math.pow(1.5, -(ca.timer-50+(i*5)))), ca.yps[i], i, g.gfx.layers.sprites);
				}
				if (ca.timer == 60)
				{
					ca.state++;
					ca.timer = 0;
					if (!ca.init)
					{
						ca.init = true;
						g.dialog.show('computerintro');
					}
				}
				default:
				break;
				case 1:		//main screen
				for (var i = 0; i < 5; i++)
					g.gfx.draw(17, ca.xps[i], ca.yps[i], i, g.gfx.layers.sprites);
				break;
				case 2:		//switch out from main
				ca.timer++;
				if (ca.timer < 35)
				{
					for (var i = 0; i < 5; i++)
						g.gfx.draw(17, Math.ceil(ca.xps[i] - Math.pow(2, (ca.timer-(i*5)))), ca.yps[i], i, g.gfx.layers.sprites);
				}
				else
				{
					ca.timer = 0;
					ca.state = ca.nextstate;
				}
				break;
				case 3:		//boot up pesterchum
				ca.timer++;
				g.gfx.draw(58, 307, 44, 0, g.gfx.layers.sprites, {x:false, y:false}, ca.timer/60);
				g.gfx.draw(61, 55, -Math.pow(1.5, -(ca.timer - 20)), 0, g.gfx.layers.sprites);
				g.gfx.draw(57, 69-Math.pow(1.6, -(ca.timer - 20)), 115, 0, g.gfx.layers.sprites);
				g.gfx.draw(62, 69, 338+Math.pow(1.5, -(ca.timer - 20)), 0, g.gfx.layers.sprites);
				for (var i = 0; i < 3; i++)
					g.gfx.draw(56, 75-Math.pow(1.6, -(ca.timer - 20)), 163 + i*23, i + (ca.chums[i].online?3:0), g.gfx.layers.prioritysprites);
				if (ca.timer == 30)
				{
					ca.timer = 0;
					ca.state++;
				}
				break;
				case 4:		//pesterchum
				if (!ca.initpc)
				{
					g.dialog.show('comppcintro');
					ca.initpc = true;
				}
				g.gfx.draw(58, 307, 44, 0, g.gfx.layers.sprites, {x:false, y:false}, .5);
				g.gfx.draw(61, 55, 0, 0, g.gfx.layers.sprites);
				g.gfx.draw(57, 69, 115, 0, g.gfx.layers.sprites);
				g.gfx.draw(62, 69, 338, 0, g.gfx.layers.sprites);
				for (var i = 0; i < 3; i++)
				{
					g.gfx.draw(56, 75, 163 + i*23, i + (ca.chums[i].online?3:0), g.gfx.layers.prioritybg);
					var tf = g.controls.istouchfinger(new Rectangle(75, 163, 194, 69, true));
					if (tf >= 0 && !g.frozen)
					{		//0 = gina, 1 = brad, 2 = bach
						var ty = Math.floor((g.p[tf].y - 163)/23);
						if (!ca.chums[ty].online)
						{
							g.dialog.notice('What are you trying to do? They\'re offline, silly!');
						}
						else if (ty == 0 && ca.chums[0].state == 0)
						{
							g.dialog.show('gina1', function () {
								g.area.loadarea(1, '', '', 'ginagift');
								g.area.areas[1].objects[1].f = 1;
								g.timeouts.addtimeout(60, function () {
									g.dialog.show('gina2', function () {
										g.area.areas[1].objects[1].f = 2;
										g.area.areas[2].objects[2].f = 1;
										g.area.funcs.getthing.init(98, 400, 110, 'gina3', function () {
											g.area.areas[3].chums[0].state = 1;
											g.area.currentarea = 3;
										});
									});
								}, false);
							});
						}
						else if (ty == 0 && ca.chums[0].state == 1 && g.area.areas[4].sprites[2].initconvo)
						{
							g.dialog.show('gina4', function () {
								ca.chums[0].state++;
							});
						}
						else if (ty == 1 && ca.chums[1].state == 0 && ca.chums[1].pestering)
						{
							g.dialog.show('brad1', function () {
								ca.chums[1].state++;
								ca.chums[1].pestering = false;
							});
						}
						else if (ty == 2 && ca.chums[2].state == 0 && ca.chums[2].pestering)
						{
							g.dialog.show('bach1', function () {
								ca.chums[2].state++;
								ca.chums[2].pestering = false;
							});
						}
						else if (ty == 0 && ca.chums[0].state == 2 && ca.chums[0].pestering)
						{
							g.dialog.show('gina5', function () {
								ca.chums[0].pestering = false;
								ca.chums[0].state++;
								ca.chums[2].pestering = true;
							});
						}
						else if (ty == 2 && ca.chums[2].state == 1 && ca.chums[2].pestering)
						{
							g.dialog.show('bach2', function () {
								ca.chums[2].pestering = false;
								ca.chums[2].state++;
							});
						}
						else if (ty == 1 && ca.chums[1].state == 1 && ca.chums[2].state == 2)
						{
							g.dialog.show('brad2', function () {
								ca.chums[1].state++;
							});
						}
						else if (ty == 2 && ca.chums[2].state == 2 && ca.chums[1].state == 2)
							g.dialog.show('bachinterlude');
						else if (ty == 1 && ca.chums[1].state == 3)
						{
							g.dialog.show('brad3', function () {
								g.area.loadarea(1, '', '', 'ginagift');
								ca.chums[1].state++;
								var offsetx = [0, -3, 3];
								var offsety = [0, 3, 3];
								var frames = [0,1,2,1,0,2,1,2]
								var startx = g.area.areas[1].x;
								var starty = g.area.areas[1].y;
								g.timeouts.addtimeout(30, function (timer) {
									var index = frames[(Math.floor(timer/3)*3)%8];
									g.area.areas[1].x = startx + offsetx[index];
									g.area.areas[1].y = starty + offsety[index];
								}, true);
								g.timeouts.addtimeout(50, function () {
									g.dialog.show('brad3-2', function () {
										g.area.currentarea = 3;
									});
								});
							});
						}
						else if (ty == 2 && ca.chums[2].state == 2 && ca.chums[2].pestering)
						{
							g.dialog.show('bach3', function () {
								ca.chums[2].state++;
								ca.chums[2].pestering = false;
								ca.chums[1].state++;
							});
						}
						else if (ty == 1 && ca.chums[1].state == 5)
						{
							g.dialog.show('brad4', function () {
								ca.chums[1].state++;
							});
						}
						else if (ty == 2 && g.area.areas[4].sprites[2].haspassport)
						{
							g.dialog.show('bach4', function () {
								g.query.show(['That\'s the end! You can go on to the next page now!'], 200, 200, function () {			//FRIGGIN FINALLY
									//code to navigate to the next page goes here once the next page is released :D
								});
							});
						}
						else
						{
							g.dialog.notice('Mmmmm... How about no?');
						}
						
					}
				}
				if (!ca.spotimer)
					ca.spotimer = 0;
				ca.spotimer++;
				if (ca.spotimer < 30)
				{
					for (var i = 0; i < 3; i++)
					{
						if (ca.chums[i].pestering)
							g.gfx.draw(59, 278, 146 + i*23, 0, g.gfx.layers.prioritybg);
					}
				}
				else if (ca.spotimer == 60)
					ca.spotimer = 0;
				if (!g.frozen && g.controls.istouch(new Rectangle(307, 38, 30, 30, true)))
				{
					ca.timer = 30;
					ca.state = 5;
				}
				break;
				case 5:		//shut down pesterchum
				ca.timer--;
				g.gfx.draw(58, 307, 44, 0, g.gfx.layers.sprites, {x:false, y:false}, ca.timer/60);
				g.gfx.draw(61, 55, -Math.pow(1.5, -(ca.timer - 20)), 0, g.gfx.layers.sprites);
				g.gfx.draw(57, 69-Math.pow(1.6, -(ca.timer - 20)), 115, 0, g.gfx.layers.sprites);
				g.gfx.draw(62, 69, 338+Math.pow(1.5, -(ca.timer - 20)), 0, g.gfx.layers.sprites);
				for (var i = 0; i < 3; i++)
					g.gfx.draw(56, 75-Math.pow(1.6, -(ca.timer - 20)), 163 + i*23, i + (ca.chums[i].online?3:0), g.gfx.layers.prioritybg);
				if (ca.timer == 0)
				{
					ca.timer = 0;
					ca.state = 0;
				}
				break;
				case 6:		//boot up IE
				ca.timer++;
				if (ca.timer < 15)
				{
					g.gfx.draw(64, 26, 381+Math.pow(1.5, -(ca.timer - 10)), 0, g.gfx.layers.prioritybg);
					g.gfx.draw(65, 29, 19-Math.pow(1.5, -(ca.timer - 10)), 0, g.gfx.layers.prioritybg);
					g.gfx.draw(68, ca.tabs[ca.curtab].dim.x1-4, ca.tabs[ca.curtab].dim.y1-4-Math.pow(1.5, -(ca.timer - 10)), 0, g.gfx.layers.prioritybg);
					g.gfx.draw(66, 172, 391+Math.pow(1.5, -(ca.timer - 10)), ca.curtab, g.gfx.layers.prioritybg);
				}
				else
				{
					g.gfx.draw(64, 26, 381, 0, g.gfx.layers.prioritybg);
					g.gfx.draw(65, 29, 19, 0, g.gfx.layers.prioritybg);
					g.gfx.draw(68, ca.tabs[ca.curtab].dim.x1-4, ca.tabs[ca.curtab].dim.y1-4, 0, g.gfx.layers.prioritybg);
					g.gfx.draw(66, 172, 391, ca.curtab, g.gfx.layers.prioritybg);
					g.gfx.draw(ca.tabs[ca.curtab].page, -24, ca.tabs[ca.curtab].curscr-107, 0, g.gfx.layers.sprites, {x:false, y:false}, (ca.timer-15)/30);
				}
				if (ca.timer == 45)
				{
					ca.timer = 0;
					ca.state++;
				}
				break;
				case 7:		//IE
				if (!ca.initie)
				{
					g.dialog.show('compieintro');
					ca.initie = true;
				}
				for (var i = 0; i < ca.tabs.length; i++)
				{
					if (!g.frozen && i != ca.curtab && g.controls.istouch(ca.tabs[i].dim))
						ca.curtab = i;
				}
				if (ca.scrollfinger == -1)
				{
					ca.scrollfinger = g.controls.istouchfinger(new Rectangle(28, 107, 529, 273, true));
					if (g.frozen)
						ca.scrollfinger = -1;
					if (ca.scrollfinger != -1)
					{
						ca.scrollstart = g.p[ca.scrollfinger].y;
						ca.pagestart = ca.tabs[ca.curtab].curscr;
					}
				}
				else
				{
					if (!g.p[ca.scrollfinger])
						ca.scrollfinger = -1;
					else
						ca.tabs[ca.curtab].curscr = ca.scrollstart - g.p[ca.scrollfinger].y + ca.pagestart;
				}
				if (ca.tabs[ca.curtab].curscr < 0)
					ca.tabs[ca.curtab].curscr = 0;
				else if (ca.tabs[ca.curtab].curscr > ca.tabs[ca.curtab].maxscr)
					ca.tabs[ca.curtab].curscr = ca.tabs[ca.curtab].maxscr;
				g.gfx.draw(64, 26, 381, 0, g.gfx.layers.prioritybg);
				g.gfx.draw(65, 29, 19, 0, g.gfx.layers.prioritybg);
				g.gfx.draw(68, ca.tabs[ca.curtab].dim.x1-4, ca.tabs[ca.curtab].dim.y1-4, 0, g.gfx.layers.prioritybg);
				g.gfx.draw(66, 172, 391, ca.curtab, g.gfx.layers.prioritybg);
				g.gfx.draw(ca.tabs[ca.curtab].page, -24, ca.tabs[ca.curtab].curscr-107, 0, g.gfx.layers.sprites);
				if (!g.frozen && g.controls.istouch(new Rectangle(42, 388, 30, 30, true)))
				{
					ca.state++;
					ca.timer = 15;
				}
				break;
				case 8:		//shut down IE
				ca.timer--;
				g.gfx.draw(64, 26, 381+Math.pow(1.5, -(ca.timer - 10)), 0, g.gfx.layers.prioritybg);
				g.gfx.draw(65, 29, 19-Math.pow(1.5, -(ca.timer - 10)), 0, g.gfx.layers.prioritybg);
				g.gfx.draw(68, ca.tabs[ca.curtab].dim.x1-4, ca.tabs[ca.curtab].dim.y1-4-Math.pow(1.5, -(ca.timer - 10)), 0, g.gfx.layers.prioritybg);
				g.gfx.draw(66, 172, 391+Math.pow(1.5, -(ca.timer - 10)), ca.curtab, g.gfx.layers.prioritybg);
				g.gfx.draw(ca.tabs[ca.curtab].page, -24, ca.tabs[ca.curtab].curscr-107, 0, g.gfx.layers.sprites, {x:false, y:false}, ca.timer/15);
				if (ca.timer == 0)
					ca.state = 0;
				break;
			}
			if (ca.exiting)
				ca.exit(ca);
		},
		onLoad: function () {},
		onActivate: function () {},
		timer: 0,
		init: false,
		initpc: false,
		initie: false,
		state: 0,
		x:0,
		y:0,
		xps: [77, 247, 417, 77, 247],
		yps: [60, 60, 60, 240, 240],
		chums: [
			{online: true, pestering: false, state: 0}, {online: false, pestering: false, state: 0}, {online: false, pestering: false, state: 0}
		],
		tabs: [
			{dim: new Rectangle(156, 37, 112, 61, true), page: 67, maxscr: 550, curscr: 50}, {dim: new Rectangle(296, 37, 112, 61, true), page: 146, maxscr: 2768, curscr: 408}
		],
		curtab: 0,
		scrollfinger: -1,
		scrollstart: 0,
		pagestart: 0,
		player: 0,
		sprites: [
			{
				name: 'null',
				x: 0,
				y: 0,
				dim: new Rectangle(0,0,650,450)
			}, {
				name: 'compbtn',
				num: 0
			}, {
				name: 'compbtn',
				num: 1
			}, {
				name: 'compbtn',
				num: 2
			}, {
				name: 'compbtn',
				num: 3
			}, {
				name: 'compbtn',
				num: 4
			}
		],
		last: 1,
		exiting: false,
		exittimer: 0,
		exit: function (ca) {
			ca.exittimer++;
			var a = 1;
			if (ca.exittimer < 30)
				a = ca.exittimer/30;
			g.gfx.drawfunc(function () {
				g.c.fillStyle = 'black';
				g.c.globalAlpha = a;
				g.c.fillRect(0,0,650,450);
				g.c.globalAlpha = 1;
			}, g.gfx.layers.prioritysprites);
			if (ca.exittimer == 60)
			{
				ca.exiting = false;
				ca.exittimer = 0;
				//ca.state = 0;
				//ca.timer = 0;
				g.area.currentarea = ca.last;
				g.ui.enabled = true;
				ca.entering = true;
			}
		},
		entering: true,
		entertimer: 60,
		enter: function (ca) {
			ca.entertimer--;
			var a = 1;
			if (ca.entertimer < 30)
				a = ca.entertimer/30;
			g.gfx.drawfunc(function () {
				g.c.fillStyle = 'black';
				g.c.globalAlpha = a;
				g.c.fillRect(0,0,650,450);
				g.c.globalAlpha = 1;
			}, g.gfx.layers.prioritysprites);
			if (ca.entertimer == 0)
			{
				ca.entering = false;
				ca.entertimer = 60;
			}
		}
	}, {												//area 4 - outside
		bg: 19,
		hitbox: 44,
		reclist: group3recs,
		x: 2000,
		y: 2000,
		player: 0,
		ents: {
			living: [736, 1221, 1020, 1368, true, false],
			trapdoor: []			//tbd
		},
		onLoad: function (ent) {
			var ca = g.area.areas[4];
			g.gfx.setbgcolor('#e4a034');
			var tent = ca.ents[ent];
			if (tent)
			{
				ca.x = tent[0];
				ca.y = tent[1];
				ca.sprites[0].x = tent[2];
				ca.sprites[0].y = tent[3];
				ca.sprites[0].faceleft = tent[4];
				ca.sprites[0].faceback = tent[5];
				ca.sprites[0].xspd = 0;
				ca.sprites[0].yspd = 0;
			}
		},
		onActivate: function () {},
		process: function (ca) {
			g.area.funcs.hswalk(ca);
		},
		sprites: [
			{
				index: 0,
				name: 'tony',
				dim: new Rectangle(14,90,65,26,true),
				x: 813,
				y: 479,
				xspd: 0,
				yspd: 0,
				xsub: 0,
				ysub: 0,
				faceleft: false,
				faceback: false,
				sheet: 46,
				frame: 0,
				frametimer: 0,
				halfscale: true
			}, {		//door
				name: 'area',
				dim: new Rectangle(112, 253),
				x: 1059,
				y: 1211,
				option: 'Enter',
				callback: function () {
					g.area.loadarea(17, 'inout', 'white', 'outside');
				}
			}, {		//gramma
				name: 'area',
				dim: new Rectangle(88,170),
				x: 924,
				y: 1286,
				talk: function (callback) {g.query.queueoption('Talk to Gramma', callback);},
				callback: function () {
					var cs = g.area.areas[4].sprites[2];
					if (!cs.initconvo)
					{
						cs.talk(function () {
							g.dialog.show('grammainit', function () {
								cs.initconvo = true;
							});
						});
					}
					else if (!cs.approvetable && g.area.areas[3].chums[0].state < 2) {}
					else if (!cs.approvetable)
					{
						cs.talk(function () {
							g.dialog.show('grammapostgina', function () {
								cs.approvetable = true;
							});
						});
					}
					else if (!cs.playedcards && !g.area.funcs.captcha.has[104])
					{
						cs.talk(function () {
							g.dialog.show('grammawaitingforcards');
						});
					}
					else if (!cs.playedcards)
					{
						cs.talk(function () {
							g.dialog.show('grammahastable', function () {
								g.area.areas[4].sprites[0].x = 826;
								g.area.areas[4].sprites[0].y = 1372;
								g.area.areas[4].sprites[0].faceback = true;
								g.area.areas[4].sprites[0].faceleft = false;
								g.area.areas[4].sprites[0].frame = 0;
								g.area.funcs.captcha.put(104, 873-g.area.areas[4].x, 1388-g.area.areas[4].y, function () {
									g.area.areas[4].hitpatches[0] = {recid: 136, x:	 863, y: 1446, dim: new Rectangle(85, 28)};
									g.area.areas[4].objects[6].a = 100;
									g.dialog.show('grammahastablecont', function () {
										cs.playedcards = true;
										g.area.areas[3].chums[1].pestering = g.area.areas[3].chums[2].pestering = true;
									});
								});
							});
						});
					}
					else if (g.area.areas[3].chums[1].state == 0 || g.area.areas[3].chums[2].state == 0) {}
					else if (g.area.areas[3].chums[0].state == 2 && g.area.areas[3].chums[0].pestering) {
						cs.talk(function () {
							g.dialog.show('grammawaitingforset2');
						});
					}
					else if ((g.area.areas[3].chums[1].state == 2 || g.area.areas[3].chums[2].state == 2) && !cs.askedforenvelope) {
						cs.talk(function () {
							g.dialog.show('grammagiftdiscussion', function () {
								cs.askedforenvelope = true;
							});
						});
					}
					else if (cs.askedforenvelope && !cs.recievedenvelope && !g.area.funcs.captcha.has[49])
					{
						cs.talk(function () {
							g.dialog.show('grammawaitingforenvelope');
						});
					}
					else if (cs.askedforenvelope && !cs.recievedenvelope && g.area.funcs.captcha.has[49])
					{
						cs.talk(function () {
							g.dialog.show('grammaenvelope1', function () {
								g.area.funcs.captcha.put(49, 877-g.area.areas[4].x, 1352-g.area.areas[4].y, function () {
									g.dialog.show('grammaenvelope2', function () {
										g.timeouts.addtimeout(30, function () {
											g.area.funcs.getthing.init(142, 930-g.area.areas[4].x, 1372-g.area.areas[4].y, 'grammaenvelope3', function () {
												cs.recievedenvelope = true;
												g.area.areas[3].chums[1].state++;
											});
										});
									});
								});
							});
						});
					}
					else if (cs.recievedenvelope && g.area.areas[3].chums[1].state == 3) {}
					else if (!cs.gopassport && cs.recievedenvelope && g.area.areas[3].chums[1].state == 6) {
						cs.talk(function () {
							g.dialog.show('grammapassport1', function () {
								cs.gopassport = true;
							});
						});
					}
					else if (cs.gopassport && !g.area.funcs.captcha.has[920] && !cs.haspassport) {
						cs.talk(function () {
							g.dialog.show('grammapassport2');
						});
					}
					else if (cs.gopassport && g.area.funcs.captcha.has[920] && !cs.haspassport) {
						cs.talk(function () {
							g.dialog.show('grammapassport3', function () {
								g.area.funcs.captcha.put(920, 877-g.area.areas[4].x, 1352-g.area.areas[4].y, function () {
									g.dialog.show('grammapassport3-2', function () {
										cs.haspassport = true;
										g.area.areas[3].chums[2].pestering = true;
									});
								});
							});
						});
					}
					else if (cs.haspassport) {
						cs.talk(function () {
							g.dialog.show('grammaend');
						});
					}
				}
			}, {
				name: 'examine',
				x: 727,
				y: 1788,
				dim: new Rectangle(156,238),
				object: 'gate',
				dialog: 'examinegate'
			}, {
				name: 'examine',
				x: 611,
				y: 1501,
				dim: new Rectangle(347, 236),
				object: 'slope',
				dialog: 'examineslope'
			}, {
				name: 'examine',
				x: 1576,
				y: 1431,
				dim: new Rectangle(454,392),
				object: 'bushes',
				dialog: 'examinebushes'
			}, {
				name: 'examine',
				x: 400,
				y: 947,
				dim: new Rectangle(562,50),
				object: 'cables',
				dialog: 'examinecables'
			}, {
				name: 'examine',
				x: 637,
				y: 333,
				dim: new Rectangle(297,274),
				object: 'damage',
				dialog: 'examinedamage'
			}
		],
		objects: [
			{					//house
				recid: 45,
				x: 813,
				y: 479,
				p: function () {		//1264, [1700,2200]:1100, 1355
					var px = g.area.areas[4].sprites[0].x;
					if (px < 1700)
						return 1264;
					else if (px > 2200)
						return 1355;
					return 1100;
				}
			}, {					//fence
				recid: 47,
				x: 420,
				y: 861,
				p: 2150
			}, {					//ramp
				recid: 48,
				x: 611,
				y: 1492,
				p: 1471
			}, {					//porch
				recid: 49,
				x: 602,
				y: 1062,
				p: function () {
					var px = g.area.areas[4].sprites[0].x + g.area.areas[4].sprites[0].dim.x1 + g.area.areas[4].sprites[0].dim.width/2;
					if (px > 1225)
						return 1615;
					if (px < 602)
						return 1395;
					if (px > 809)
						return 1272;
					var f = -0.598131*px + 1736.17 + 20;
					//g.debug.adddata('Calculated swap point: '+f);
					return f;
					
				}
			}, {					//awning
				recid: 50,
				x: 696,
				y: 932,
				p: 2000
			}, {					//gramma
				recid: 51,
				x: 918,
				y: 1284,
				p: function () {
					if (g.area.areas[4].sprites[0].x < 950)
						return 1430;
					return 1410;
				}
			}, {					//table
				recid: 133,
				x: 873,
				y: 1388,
				p: 1460,
				a: 0
			}
		]
	}, {						//5 - hallway/stairwell
		reclist: group1recs,
		bg: 69,
		hitbox: 70,
		player: 0,
		x: 500,
		y: 200,
		ents: {
			gramma: [305, 950, 546, 1047, true, false],
			kitchen: [-15, 875, 114, 955, false, false],
			room: [526, 200, 869, 363, false, false]
		},
		onLoad: function (ent) {
			g.area.funcs.doent(g.area.areas[5], ent);
			g.gfx.setbgcolor('white');
			if (g.area.areas[3].chums[1].state == 1 && g.area.areas[3].chums[2].state == 1 && !g.area.areas[3].chums[1].pestering && !g.area.areas[3].chums[2].pestering)
				g.area.areas[3].chums[0].pestering = true;
		},
		onActivate: function () {},
		process: function (ca) {
			g.area.funcs.hswalk(ca);
		},
		sprites: [
			{
				index: 0,
				name: 'tony',
				dim: new Rectangle(30,180,110,53,true),
				x: 752,
				y: 350,
				xspd: 0,
				yspd: 0,
				xsub: 0,
				ysub: 0,
				faceleft: false,
				faceback: false,
				sheet: 5,
				frame: 0,
				frametimer: 0
			}, {
				name: 'area',
				x: 84,
				y: 894,
				dim: new Rectangle(0,0,151,268, true),
				option: 'Enter Kitchen',
				callback: function () {
					g.area.loadarea(10, 'inout', 'black', 'hall1');
				}
			}, {
				name: 'area',
				x: 826,
				y: 583,
				dim: new Rectangle(0,0,151,65, true),
				option: 'Enter Room',
				callback: function () {
					g.area.loadarea(1, 'inout', 'black', 'door');
				}
			}, {
				name: 'area',
				x: 620,
				y: 892,
				dim: new Rectangle(0,0,150,376, true),
				init: false,
				callback: function () {
					var inst = g.area.areas[5].sprites[2];
					if (inst.init)
					{
						g.query.show(['Enter Gramma\'s room', 'Cancel'], 100, 100, function (num) {
							if (num == 1) return;
							g.area.loadarea(6, 'inout', 'black', 'door');
						});
						return;
					}
					inst.init = true;
					g.dialog.show('grammaroominit', function () {
						g.query.show(['Enter anyway', 'Cancel'], 100, 100, function (num) {
							if (num == 1) return;
							g.area.loadarea(6, 'inout', 'black', 'door');
						});
					});
				}
			}, {
				name: 'examine',
				x: 304,
				y: 896,
				dim: new Rectangle(0,0,308,342,true),
				object: 'bookcase',
				dialog: 'hallbookcase'
			}, {
				name: 'examine',
				x: 1471,
				y: 383,
				dim: new Rectangle(0,0,120,308,true),
				object: 'painting',
				dialog: 'hallpainting'
			}, {
				name: 'examine',
				x: 847,
				y: 296,
				dim: new Rectangle(0,0,88,204,true),
				object: 'rack',
				dialog: 'hallrack'
			}, {
				name: 'examine',
				x: 1067,
				y: 438,
				dim: new Rectangle(0,0,289,194,true),
				object: 'shelves and... dolls?',
				dialog: 'halldolls'
			}, {
				name: 'examine',
				x: 1030,
				y: 537,
				dim: new Rectangle(0,0,165,500,true),
				object: 'rug',
				dialog: 'hallrug'
			}
		],
		objects: [
			{	//stairwellwall
				recid: 71,
				x: 905,
				y: 355,
				p: 744,
				a: 0,
				aopt: 'fadebehind'
			}, {	//door
				recid: 75,
				x: 827,
				y: 263,
				p: 717,
				a: 50
			}, {	//doll case
				recid: 99,
				x: 1064,
				y: 431,
				p: 553
			}, {	//bookshelf
				recid: 100,
				x: 305,
				y: 898,
				p: 1145
			}
		],
	}, {		//room 6 - gramma's room, front
		reclist: group1recs,
		twin: 7,
		bg: 72,
		hitbox: 74,
		hitpatches: [],
		ents: {
			door: [199, 310, 481, 495, false, true]
		},
		onLoad: function (ent) {
			g.area.funcs.doent(g.area.areas[6],ent);
		},
		onActivate: function () {},
		player: 0,
		x: 0,
		y: 0,
		process: function (ca) {
			g.area.funcs.hswalk(ca);
		},
		onSwap: function (ca, ta) {
			ta.sprites[0].y = 451 + 789 - (ca.sprites[0].y + 206) - 206;
			ta.sprites[0].x = 24 + 1033 - (ca.sprites[0].x + 85) - 85;
			ta.sprites[0].faceleft = !ca.sprites[0].faceleft;
			ta.sprites[0].faceback = !ca.sprites[0].faceback;
			ta.sprites[0].frametimer = ca.sprites[0].frametimer;
			ta.sprites[0].xspd = -ca.sprites[0].xspd;
			ta.sprites[0].yspd = -ca.sprites[0].yspd;
			ta.x = ca.x + ta.sprites[0].x - ca.sprites[0].x;
			ta.y = ca.y + ta.sprites[0].y - ca.sprites[0].y;
		},
		sprites: [
			{
				index: 0,
				name: 'tony',
				dim: new Rectangle(30,180,110,53,true),
				x: 752,
				y: 350,
				xspd: 0,
				yspd: 0,
				xsub: 0,
				ysub: 0,
				faceleft: false,
				faceback: false,
				sheet: 5,
				frame: 0,
				frametimer: 0
			}, {
				name: 'area',
				x: 441,
				y: 711,
				dim: new Rectangle(0,0,152,64,true),
				option: 'Exit',
				callback: function () { g.area.loadarea(5, 'inout', 'black', 'gramma'); }
			}, {
				name: 'area',
				x: 492,
				y: 386,
				dim: new Rectangle(0,0,514,317,true),
				callback: function () {
					g.query.queueoption('Examine Antiques', function () {g.dialog.show('roomantiques');});
					g.query.queueoption('Equip Pistol', function () {
						g.area.funcs.captcha.showspecibus();
						g.dialog.show('equippistol', function () { g.area.funcs.captcha.hidespecibus(); });
					});
					if (!g.area.funcs.captcha.has[14])
					{
						g.query.queueoption('Take Flower Key', function () {
							g.dialog.show('takeflowerkey', function () {
								g.area.areas[7].objects[2].y = -900;
								g.area.areas[6].objects[1].y = -900;
								g.area.funcs.captcha.take(14, 450, 100);
							});
						});
					}
				}
			}, {
				name: 'area',
				x: 59,
				y: 214,
				dim: new Rectangle(0,0,426,403,true),
				option: 'Examine map',
				callback: function () {
					g.area.areas[6].x = 0;
					g.area.areas[6].y = 200;
					g.dialog.show('examinegrammamap');
				}
			}, {
				name: 'stool', 
				x: 620, 
				y: 650, 
				hasbird: true,
				index: 4,
				twin: 3
			}
		],
		objects: [
			{		//door
				recid: 75,
				x: 440,
				y: 383,
				p: 767,
				a: 50,
				f: 2
			}, {
				recid: 107,
				x: 668,
				y: 464,
				p: 0,
				f: 1
			}
		]
	}, {		//room 7 - gramma's room, rear
		reclist: group1recs,
		twin: 6,		//should technically never be able to be 'loaded' since it's an isolated twin
		bg: 73,
		hitbox: 104,
		hitpatches: [],
		player: 0,
		x: 0,
		y: 0,
		process: function (ca) {
			g.area.funcs.hswalk(ca);
		},
		onSwap: function (ca, ta) {
			ta.sprites[0].y = 451 + 789 - (ca.sprites[0].y + 206) - 206;
			ta.sprites[0].x = 24 + 1033 - (ca.sprites[0].x + 85) - 85;
			ta.sprites[0].faceleft = !ca.sprites[0].faceleft;
			ta.sprites[0].faceback = !ca.sprites[0].faceback;
			ta.sprites[0].frametimer = ca.sprites[0].frametimer;
			ta.sprites[0].xspd = -ca.sprites[0].xspd;
			ta.sprites[0].yspd = -ca.sprites[0].yspd;
			ta.x = ca.x + ta.sprites[0].x - ca.sprites[0].x;
			ta.y = ca.y + ta.sprites[0].y - ca.sprites[0].y;
		},
		sprites: [
			{
				index: 0,
				name: 'tony',
				dim: new Rectangle(30,180,110,53,true),
				x: 752,
				y: 350,
				xspd: 0,
				yspd: 0,
				xsub: 0,
				ysub: 0,
				faceleft: false,
				faceback: false,
				sheet: 5,
				frame: 0,
				frametimer: 0
			}, {
				name: 'area',
				x: 470,
				y: 145,
				dim: new Rectangle(0,0,145,377,true),
				option: 'Exit',
				callback: function () { g.area.loadarea(5, 'inout', 'black', 'gramma'); }
			}, {
				name: 'area',
				x: 55,
				y: 397,
				leaftaken: false,
				dim: new Rectangle(0,0,529,263,true),
				callback: function () {
					g.query.queueoption('Examine Antiques', function () {g.dialog.show('roomantiques');});
					g.query.queueoption('Equip Pistol', function () {
						g.area.funcs.captcha.showspecibus();
						g.dialog.show('equippistol', function () { g.area.funcs.captcha.hidespecibus(); });
					});
					if (!g.area.funcs.captcha.has[14])
					{
						g.query.queueoption('Take Flower Key', function () {
							g.dialog.show('takeflowerkey', function () {
								g.area.areas[7].objects[2].y = -900;
								g.area.areas[6].objects[1].y = -900;
								g.area.funcs.captcha.take(14, 200, 230);
							});
						});
					}
				}
			}, {
				name: 'stool', 
				x: 350, 
				y: 360,
				hasbird: true, 
				index: 3,
				twin: 4
			}
		],
		objects: [
			{
				recid: 103, 
				x: 55, 
				y: 380, 
				p: 900
			}, {
				recid: 102, 
				x: 490, 
				y: 445, 
				p: 900
			}, {
				recid: 107,
				x: 365,
				y: 498,
				p: 900
			}
		]
	}, {		//room 8 - dining room, front
		reclist: group2recs,
		twin: 9,
		bg: 76,
		hitbox: 78,
		ents: {
			kitchen: [125, 279, 336, 441, false, true],
			hall2: [-24, 231, 90, 378, false, true]
		},
		onLoad: function (ent) {
			g.area.funcs.doent(g.area.areas[8],ent);
		},
		onActivate: function () {},
		player: 0,
		x: 0,
		y: 0,
		process: function (ca) {
			g.area.funcs.hswalk(ca);
		},
		onSwap: function (ca, ta) {
			ta.sprites[0].y = 413 + 721 - (ca.sprites[0].y + 206) - 206;
			ta.sprites[0].x = 27 + 940 - (ca.sprites[0].x + 85) - 85;
			ta.sprites[0].faceleft = !ca.sprites[0].faceleft;
			ta.sprites[0].faceback = !ca.sprites[0].faceback;
			ta.sprites[0].frametimer = ca.sprites[0].frametimer;
			ta.sprites[0].xspd = -ca.sprites[0].xspd;
			ta.sprites[0].yspd = -ca.sprites[0].yspd;
			ta.x = ca.x + ta.sprites[0].x - ca.sprites[0].x;
			ta.y = ca.y + ta.sprites[0].y - ca.sprites[0].y;
		},
		sprites: [
			{
				index: 0,
				name: 'tony',
				dim: new Rectangle(30,180,110,53,true),
				x: 752,
				y: 350,
				xspd: 0,
				yspd: 0,
				xsub: 0,
				ysub: 0,
				faceleft: false,
				faceback: false,
				sheet: 5,
				frame: 0,
				frametimer: 0
			}, {
				name: 'area',
				x: 46,
				y: 567,
				dim: new Rectangle(0,0,152,64,true),
				option: 'Enter Hallway',
				callback: function () { g.area.loadarea(12, 'inout', 'black', 'dining'); }
			}, {
				name: 'area',
				x: 317,
				y: 661,
				dim: new Rectangle(0,0,150,55,true),
				option: 'Enter Kitchen',
				callback: function () { g.area.loadarea(10, 'inout', 'black', 'dining'); }
			}, {
				name: 'examine',
				x: 111,
				y: 345,
				dim: new Rectangle(201,213),
				object: 'cabinet',
				dialog: 'examinedrcabinet'
			}
		],
		objects: [
			{		//door
				recid: 75,
				x: 47,
				y: 241,
				p: 767,
				a: 50,
				f: 2
			}, {		//door
				recid: 75,
				x: 317,
				y: 332,
				p: 767,
				a: 50,
				f: 2
			}, {		//chandelier
				recid: 111,
				x: 392,
				y: 145,
				p: 766,
				a: 50
			}, {		//table
				recid: 118,
				x: 349,
				y: 419,
				p: 564
			}, {		//green thing
				recid: 114,
				x: 710,
				y: 394,
				p: 599
			}, {		//case
				recid: 113,
				x: 109,
				y: 340,
				p: 500
			}, {		//cube
				recid: 112,
				x: 418,
				y: 300,
				p: 300
			}
		]
	}, {		//room 9 - dining room, rear
		reclist: group2recs,
		twin: 8,
		bg: 77,
		hitbox: 117,
		ents: {
			kitchen: [203, 228, 461, 260, true, false],
			hall2: [343, 245, 658, 319, true, false]
		},
		onLoad: function (ent) {
			g.area.funcs.doent(g.area.areas[9],ent);
		},
		onActivate: function () {},
		player: 0,
		x: 0,
		y: 0,
		process: function (ca) {
			g.area.funcs.hswalk(ca);
		},
		onSwap: function (ca, ta) {
			ta.sprites[0].y = 413 + 721 - (ca.sprites[0].y + 206) - 206;
			ta.sprites[0].x = 27 + 940 - (ca.sprites[0].x + 85) - 85;
			ta.sprites[0].faceleft = !ca.sprites[0].faceleft;
			ta.sprites[0].faceback = !ca.sprites[0].faceback;
			ta.sprites[0].frametimer = ca.sprites[0].frametimer;
			ta.sprites[0].xspd = -ca.sprites[0].xspd;
			ta.sprites[0].yspd = -ca.sprites[0].yspd;
			ta.x = ca.x + ta.sprites[0].x - ca.sprites[0].x;
			ta.y = ca.y + ta.sprites[0].y - ca.sprites[0].y;
		},
		sprites: [
			{
				index: 0,
				name: 'tony',
				dim: new Rectangle(30,180,110,53,true),
				x: 752,
				y: 350,
				xspd: 0,
				yspd: 0,
				xsub: 0,
				ysub: 0,
				faceleft: false,
				faceback: false,
				sheet: 5,
				frame: 0,
				frametimer: 0
			}, {
				name: 'area',
				x: 504,
				y: 209,
				dim: new Rectangle(150,263),
				option: 'Enter Kitchen',
				callback: function () { g.area.loadarea(11, 'inout', 'black', 'dining'); }
			}, {
				name: 'area',
				x: 775,
				y: 208,
				dim: new Rectangle(149,351),
				option: 'Enter Hallway',
				callback: function () { g.area.loadarea(13, 'inout', 'black', 'dining'); }
			}, {
				name: 'area',
				x: 663,
				y: 213,
				dim: new Rectangle(87, 292),
				callback: function () {
					g.query.queueoption('Examine organizer', function () {
						g.dialog.show('examineorganizer', function () {
							if (!g.area.funcs.captcha.init) {
								g.area.funcs.captcha.init = true;
								g.dialog.show('captchainit');
							}
						});
					});
					if (g.area.areas[4].sprites[2].askedforenvelope && !g.area.areas[4].sprites[2].recievedenvelope && !g.area.funcs.captcha.has[49]) {
						g.query.queueoption('Take envelope', function () {
							g.area.funcs.captcha.take(49, 656-g.area.areas[9].x, 311-g.area.areas[9].y);
						});
					}
				}
			}, {
				name: 'examine',
				x: 281,
				y: 223,
				dim: new Rectangle(171,250),
				object: 'painting',
				dialog: 'examinedrpainting'
			}
		],
		objects:
		[
			{		//chandelier
				recid: 111,
				x: 392,
				y: 145,
				p: 766,
				a: 50
			}, {		//table
				recid: 118,
				x: 349,
				y: 419,
				p: 564
			}, {		//green thing
				recid: 116,
				x: 88,
				y: 348,
				p: 542
			}, {		//case
				recid: 115,
				x: 661,
				y: 428,
				p: 630
			}, {		//cube
				recid: 112,
				x: 429,
				y: 558,
				p: 770
			}
		]
	}, {		//room 10 - kitchen, front
		reclist: group2recs,
		twin: 11,
		bg: 79,
		hitbox: 81,
		ents: {
			hall1: [395, 281, 765, 339, true, true],
			hall2: [201, 217, 429, 267, true, false],
			dining: [518, 217, 850, 273, true, false]
		},
		onLoad: function (ent) {
			g.area.funcs.doent(g.area.areas[10],ent);
		},
		onActivate: function () {},
		player: 0,
		x: 0,
		y: 0,
		process: function (ca) {
			g.area.funcs.hswalk(ca);
		},
		onSwap: function (ca, ta) {
			ta.sprites[0].y = 418 + 715 - (ca.sprites[0].y + 206) - 206;
			ta.sprites[0].x = 33 + 1123 - (ca.sprites[0].x + 85) - 85;
			ta.sprites[0].faceleft = !ca.sprites[0].faceleft;
			ta.sprites[0].faceback = !ca.sprites[0].faceback;
			ta.sprites[0].frametimer = ca.sprites[0].frametimer;
			ta.sprites[0].xspd = -ca.sprites[0].xspd;
			ta.sprites[0].yspd = -ca.sprites[0].yspd;
			ta.x = ca.x + ta.sprites[0].x - ca.sprites[0].x;
			ta.y = ca.y + ta.sprites[0].y - ca.sprites[0].y;
		},
		sprites: [
			{
				index: 0,
				name: 'tony',
				dim: new Rectangle(30,180,110,53,true),
				x: 752,
				y: 350,
				xspd: 0,
				yspd: 0,
				xsub: 0,
				ysub: 0,
				faceleft: false,
				faceback: false,
				sheet: 5,
				frame: 0,
				frametimer: 0
			}, {
				name: 'area',
				x: 947,
				y: 213,
				dim: new Rectangle(0,0,148,279,true),
				option: 'Enter Dining Room',
				callback: function () { g.area.loadarea(8, 'inout', 'black', 'kitchen'); }
			}, {
				name: 'area',
				x: 807,
				y: 554,
				dim: new Rectangle(0,0,152,56,true),
				option: 'Enter Hallway',
				callback: function () { g.area.loadarea(5, 'inout', 'black', 'kitchen'); }
			}, {
				name: 'area',
				x: 470,
				y: 215,
				dim: new Rectangle(0,0,146,265,true),
				option: 'Enter Hallway',
				callback: function () { g.area.loadarea(12, 'inout', 'black', 'kitchen'); }
			}, {
				name: 'area',
				x: 127,
				y: 400,
				dim: new Rectangle(96,159),
				callback: function () {
					if (g.area.areas[10].objects[4].f < 12)
					{
						g.query.queueoption('Eat a cupcake', function () {
							g.area.areas[10].objects[4].f++;
							g.area.areas[11].objects[4].f++;
						});
					}
				}
			}, {
				name: 'area',
				x: 597,
				y: 515,
				dim: new Rectangle(147, 156),
				callback: function () {
					if (g.area.areas[4].sprites[2].approvetable && !g.area.funcs.captcha.has[104] && !g.area.areas[4].sprites[2].playedcards)
					{
						g.query.queueoption('Take Table', function () {
							g.area.areas[10].objects[3].a = 0;
							g.area.areas[11].objects[3].a = 0;
							g.area.areas[10].hitpatches = [];
							g.area.areas[11].hitpatches = [];
							g.area.funcs.captcha.take(104, 622-g.area.areas[10].x, 489-g.area.areas[10].y);
						});
					}
				},
			}, {
				name: 'examine',
				x: 666,
				y: 165,
				dim: new Rectangle(270,345),
				object: 'shelf of food',
				dialog: 'examinefoodshelf'
			}, {
				name: 'examine',
				x: 234,
				y: 198,
				dim: new Rectangle(167,296),
				object: 'painting',
				dialog: 'examinekitchenpainting'
			}
		],
		objects: [
			{		//door
				recid: 75,
				x: 808,
				y: 224,
				p: 767,
				a: 50,
				f: 3
			}, {		//cabinets
				recid: 123,
				x: 30,
				y: 170,
				p: 800,
				a: 50
			}, {		//counter
				recid: 122,
				x: 31,
				y: 382,
				p: 800,
				a: 75
			}, {		//table
				recid: 121,
				x: 599,
				y: 501,
				p: 800,
				a: 50
			}, {		//cupcakes
				recid: 124,
				x: 129,
				y: 401,
				p: 800,
				f: 0
			}
		],
		hitpatches: [
			{
				x: 594,
				y: 616,
				dim: new Rectangle(132, 62),
				recid: 135
			}
		]
	}, {		//room 11 - kitchen, rear
		reclist: group2recs,
		twin: 10,
		bg: 80,
		hitbox: 82,
		player: 0,
		ents: {
			dining: [-20, 310, 100, 416, false, true],
			hall2: [295, 243, 550, 435, false, true]
		},
		onLoad: function (ent) {
			g.area.funcs.doent(g.area.areas[11],ent);
		},
		onActivate: function () {},
		x: 0,
		y: 0,
		process: function (ca) {
			g.area.funcs.hswalk(ca);
		},
		onSwap: function (ca, ta) {
			ta.sprites[0].y = 418 + 715 - (ca.sprites[0].y + 206) - 206;
			ta.sprites[0].x = 33 + 1123 - (ca.sprites[0].x + 85) - 85;
			ta.sprites[0].faceleft = !ca.sprites[0].faceleft;
			ta.sprites[0].faceback = !ca.sprites[0].faceback;
			ta.sprites[0].frametimer = ca.sprites[0].frametimer;
			ta.sprites[0].xspd = -ca.sprites[0].xspd;
			ta.sprites[0].yspd = -ca.sprites[0].yspd;
			ta.x = ca.x + ta.sprites[0].x - ca.sprites[0].x;
			ta.y = ca.y + ta.sprites[0].y - ca.sprites[0].y;
		},
		sprites: [
			{
				index: 0,
				name: 'tony',
				dim: new Rectangle(30,180,110,53,true),
				x: 752,
				y: 350,
				xspd: 0,
				yspd: 0,
				xsub: 0,
				ysub: 0,
				faceleft: false,
				faceback: false,
				sheet: 5,
				frame: 0,
				frametimer: 0
			}, {
				name: 'area',
				x: 67,
				y: 642,
				dim: new Rectangle(149,54),
				option: 'Enter Dining Room',
				callback: function () { g.area.loadarea(9, 'inout', 'black', 'kitchen'); }
			}, {
				name: 'area',
				x: 543,
				y: 643,
				dim: new Rectangle(149,60),
				option: 'Enter Hallway',
				callback: function () { g.area.loadarea(13, 'inout', 'black', 'kitchen'); }
			}, {
				name: 'area',
				x: 214,
				y: 214,
				dim: new Rectangle(150,356),
				option: 'Enter Hallway',
				callback: function () { g.area.loadarea(5, 'inout', 'black', 'kitchen'); }
			}, {
				name: 'area',
				x: 931,
				y: 367,
				dim: new Rectangle(101,235),
				callback: function () {
					if (g.area.areas[10].objects[4].f < 12)
					{
						g.query.queueoption('Eat a cupcake', function () {
							g.area.areas[10].objects[4].f++;
							g.area.areas[11].objects[4].f++;
						});
					}
				}
			}, {
				name: 'area',
				x: 430,
				y: 345,
				dim: new Rectangle(119, 163),
				callback: function () {
					if (g.area.areas[4].sprites[2].approvetable && g.area.areas[10].objects[3].a && !g.area.areas[4].sprites[2].playedcards)
					{
						g.query.queueoption('Take Table', function () {
							g.area.areas[10].objects[3].a = 0;
							g.area.areas[11].objects[3].a = 0;
							g.area.areas[10].hitpatches = [];
							g.area.areas[11].hitpatches = [];
							g.area.funcs.captcha.take(104, 418-g.area.areas[11].x, 376-g.area.areas[11].y);
						});
					}
				},
			}, {
				name: 'examine',
				x: 735,
				y: 273,
				dim: new Rectangle(163,283),
				object: 'sink and cabinets',
				dialog: 'examineknives'
			}, {
				name: 'examine',
				x: 583,
				y: 266,
				dim: new Rectangle(159,225),
				object: 'stove and oven',
				dialog: 'examinestove'
			}
		],
		objects: [
			{		//door
				recid: 75,
				x: 67,
				y: 310,
				p: 767,
				a: 50
			}, {		//door
				recid: 75,
				x: 543,
				y: 320,
				p: 767,
				a: 50
			}, {		//shelf
				recid: 120,
				x: 229,
				y: 362,
				p: 800,
				a: 50
			}, {		//table
				recid: 119,
				x: 434,
				y: 343,
				p: 0
			}, {		//cupcakes
				recid: 124,
				x: 931,
				y: 373,
				p: 0,
				f: 13
			}
		],
		hitpatches: [
			{
				x: 438,
				y: 456,
				dim: new Rectangle(124, 64),
				recid: 134
			}
		]
	}, {		//room 12 - hall 2, front
		reclist: group2recs,
		twin: 13,
		bg: 83,
		hitbox: 86,
		ents: {
			kitchen: [395, 281, 713, 376, false, true],
			bathroom: [395, 200, 745, 258, true, false],
			dining: [490, 200, 853, 354, true, false],
			living: [-43, 290, 85, 449, false, true]
		},
		onLoad: function (ent) {
			g.area.funcs.doent(g.area.areas[12],ent);
		},
		onActivate: function () {},
		player: 0,
		x: 0,
		y: 0,
		process: function (ca) {
			g.area.funcs.hswalk(ca);
		},
		onSwap: function (ca, ta) {
			ta.sprites[0].y = 405 + 727 - (ca.sprites[0].y + 206) - 206;
			ta.sprites[0].x = 30 + 1088 - (ca.sprites[0].x + 85) - 85;
			ta.sprites[0].faceleft = !ca.sprites[0].faceleft;
			ta.sprites[0].faceback = !ca.sprites[0].faceback;
			ta.sprites[0].frametimer = ca.sprites[0].frametimer;
			ta.sprites[0].xspd = -ca.sprites[0].xspd;
			ta.sprites[0].yspd = -ca.sprites[0].yspd;
			ta.x = ca.x + ta.sprites[0].x - ca.sprites[0].x;
			ta.y = ca.y + ta.sprites[0].y - ca.sprites[0].y;
		},
		sprites: [
			{
				index: 0,
				name: 'tony',
				dim: new Rectangle(30,180,110,53,true),
				x: 752,
				y: 350,
				xspd: 0,
				yspd: 0,
				xsub: 0,
				ysub: 0,
				faceleft: false,
				faceback: false,
				sheet: 5,
				frame: 0,
				frametimer: 0
			}, {
				name: 'area',
				x: 911,
				y: 202,
				dim: new Rectangle(0,0,148,373,true),
				option: 'Enter Dining Room',
				callback: function () { g.area.loadarea(8, 'inout', 'black', 'hall2'); }
			}, {
				name: 'area',
				x: 691,
				y: 596,
				dim: new Rectangle(0,0,151,54,true),
				option: 'Enter Kitchen',
				callback: function () { g.area.loadarea(10, 'inout', 'black', 'hall2'); }
			}, {
				name: 'area',
				x: 799,
				y: 201,
				dim: new Rectangle(0,0,150,265,true),
				option: 'Enter Bathroom',
				callback: function () { g.area.loadarea(14, 'inout', 'black', 'hall2'); }
			}, {
				name: 'area',
				x: 69,
				y: 661,
				dim: new Rectangle(0,0,149,55,true),
				option: 'Enter Living Room',
				callback: function () { g.area.loadarea(17, 'inout', 'black', 'hall2'); }
			}, {
				name: 'examine',
				x: 363,
				y: 205,
				dim: new Rectangle(294,311),
				object: 'tapestry',
				dialog: 'examineh2tap'
			}, {
				name: 'examine',
				x: 142,
				y: 321,
				dim: new Rectangle(139,288),
				object: 'painting',
				dialog: 'examineh2horse'
			}
		],
		objects: [
			{		//door
				recid: 75,
				x: 69,
				y: 333,
				p: 767,
				a: 50,
				f: 2
			}, {		//door
				recid: 75,
				x: 692,
				y: 267,
				p: 767,
				a: 50,
				f: 2
			}, {		//wall+door
				recid: 84,
				x: 883,
				y: 85,
				p: 490,
				a: 100,
				aopt: 'fadebehind'
			}
		]
	}, {		//room 13 - hall 2, rear
		reclist: group2recs,
		twin: 12,
		bg: 85,
		hitbox: 87,
		player: 0,
		ents: {
			kitchen: [-26, 268, 238, 323, true, false],
			bathroom: [52, 269, 213, 441, false, true],
			dining: [-26, 269, 89, 335, false, true],
			living: [730, 112, 830, 243, true, false]
		},
		onLoad: function (ent) {
			g.area.funcs.doent(g.area.areas[13],ent);
		},
		onActivate: function () {},
		x: 0,
		y: 0,
		process: function (ca) {
			g.area.funcs.hswalk(ca);
		},
		onSwap: function (ca, ta) {
			ta.sprites[0].y = 405 + 727 - (ca.sprites[0].y + 206) - 206;
			ta.sprites[0].x = 30 + 1088 - (ca.sprites[0].x + 85) - 85;
			ta.sprites[0].faceleft = !ca.sprites[0].faceleft;
			ta.sprites[0].faceback = !ca.sprites[0].faceback;
			ta.sprites[0].frametimer = ca.sprites[0].frametimer;
			ta.sprites[0].xspd = -ca.sprites[0].xspd;
			ta.sprites[0].yspd = -ca.sprites[0].yspd;
			ta.x = ca.x + ta.sprites[0].x - ca.sprites[0].x;
			ta.y = ca.y + ta.sprites[0].y - ca.sprites[0].y;
		},
		sprites: [
			{
				index: 0,
				name: 'tony',
				dim: new Rectangle(30,180,110,53,true),
				x: 752,
				y: 350,
				xspd: 0,
				yspd: 0,
				xsub: 0,
				ysub: 0,
				faceleft: false,
				faceback: false,
				sheet: 5,
				frame: 0,
				frametimer: 0
			}, {
				name: 'area',
				x: 67,
				y: 554,
				dim: new Rectangle(0,0,148,55,true),
				option: 'Enter Dining Room',
				callback: function () { g.area.loadarea(9, 'inout', 'black', 'hall2'); }
			}, {
				name: 'area',
				x: 281,
				y: 267,
				dim: new Rectangle(0,0,147,268,true),
				option: 'Enter Kitchen',
				callback: function () { g.area.loadarea(11, 'inout', 'black', 'hall2'); }
			}, {
				name: 'area',
				x: 184,
				y: 665,
				dim: new Rectangle(0,0,149,56,true),
				option: 'Enter Bathroom',
				callback: function () { g.area.loadarea(14, 'inout', 'black', 'hall2'); }
			}, {
				name: 'area',
				x: 906,
				y: 202,
				dim: new Rectangle(0,0,149,264,true),
				option: 'Enter Living Room',
				callback: function () { g.area.loadarea(16, 'inout', 'black', 'hall2'); }
			}, {
				name: 'examine',
				x: 97,
				y: 274,
				dim: new Rectangle(87, 246),
				object: 'plate',
				dialog: 'examineh2plate'
			}, {
				name: 'examine',
				x: 479,
				y: 110,
				dim: new Rectangle(377,423),
				object: 'escher',
				dialog: 'examineh2escher'
			}
		],
		objects: [
			{		//door
				recid: 75,
				x: 67,
				y: 225,
				p: 767,
				a: 50
			}, {		//door
				recid: 75,
				x: 184,
				y: 336,
				p: 767,
				a: 50
			}
		]
	}, {		//room 14 - bathroom, front
		reclist: group2recs,
		bg: 88,
		hitbox: 90,
		ents: {
			hall2: [-15, 180, 137, 349, false, true]
		},
		onLoad: function (ent) {
			g.area.funcs.doent(g.area.areas[14],ent);
		},
		onActivate: function () {},
		player: 0,
		x: 0,
		y: 0,
		process: function (ca) {
			g.area.funcs.hswalk(ca);
		},
		onSwap: function (ca, ta) {
			ta.sprites[0].y = 406 + 597 - (ca.sprites[0].y + 206) - 206;
			ta.sprites[0].x = 30 + 596 - (ca.sprites[0].x + 85) - 85;
			ta.sprites[0].faceleft = !ca.sprites[0].faceleft;
			ta.sprites[0].faceback = !ca.sprites[0].faceback;
			ta.sprites[0].frametimer = ca.sprites[0].frametimer;
			ta.sprites[0].xspd = -ca.sprites[0].xspd;
			ta.sprites[0].yspd = -ca.sprites[0].yspd;
			ta.x = ca.x;
			ta.y = ca.y;
		},
		sprites: [
			{
				index: 0,
				name: 'tony',
				dim: new Rectangle(30,180,110,53,true),
				x: 752,
				y: 350,
				xspd: 0,
				yspd: 0,
				xsub: 0,
				ysub: 0,
				faceleft: false,
				faceback: false,
				sheet: 5,
				frame: 0,
				frametimer: 0
			}, {
				name: 'area',
				x: 67,
				y: 531,
				dim: new Rectangle(0,0,150,59,true),
				option: 'Enter Hallway',
				callback: function () { g.area.loadarea(12, 'inout', 'black', 'bathroom'); }
			}, {
				name: 'examine',
				x: 0,
				y: 184,
				dim: new Rectangle(626,444),
				object: 'bathroom',
				dialog: 'examinebathroom'
			}
		],
		objects: [
			{		//door
				recid: 75,
				x: 67,
				y: 203,
				p: 767,
				a: 50,
				f: 2
			}
		]
	}, {		//room 15 - bathroom, rear
		reclist: group2recs,
		twin: 14,
		bg: 89,
		hitbox: 90,
		player: 0,
		ents: {
			hall2: [-12, 180, 356, 253, true, false]
		},
		onLoad: function (ent) {
			g.area.funcs.doent(g.area.areas[15],ent);
		},
		onActivate: function () {},
		x: 0,
		y: 0,
		process: function (ca) {
			g.area.funcs.hswalk(ca);
		},
		onSwap: function (ca, ta) {
			ta.sprites[0].y = 406 + 597 - (ca.sprites[0].y + 206) - 206;
			ta.sprites[0].x = 30 + 596 - (ca.sprites[0].x + 85) - 85;
			ta.sprites[0].faceleft = !ca.sprites[0].faceleft;
			ta.sprites[0].faceback = !ca.sprites[0].faceback;
			ta.sprites[0].frametimer = ca.sprites[0].frametimer;
			ta.sprites[0].xspd = -ca.sprites[0].xspd;
			ta.sprites[0].yspd = -ca.sprites[0].yspd;
			ta.x = ca.x;
			ta.y = ca.y;
		},
		sprites: [
			{
				index: 0,
				name: 'tony',
				dim: new Rectangle(30,180,110,53,true),
				x: 752,
				y: 350,
				xspd: 0,
				yspd: 0,
				xsub: 0,
				ysub: 0,
				faceleft: false,
				faceback: false,
				sheet: 5,
				frame: 0,
				frametimer: 0
			}, {
				name: 'area',
				x: 416,
				y: 181,
				dim: new Rectangle(0,0,149,286,true),
				option: 'Enter Hallway',
				callback: function () { g.area.loadarea(13, 'inout', 'black', 'bathroom'); }
			}
		],
		objects: [
		]
	}, {		//room 16 - living room, front
		reclist: group3recs,
		twin: 17,
		bg: 91,
		hitbox: 93,
		ents: {
			hall2: [390, 399, 535, 566, false, true]
		},
		onLoad: function (ent) {
			g.area.funcs.doent(g.area.areas[16],ent);
		},
		onActivate: function () {
			
		},
		player: 0,
		x: 0,
		y: 0,
		process: function (ca) {
			g.area.funcs.hswalk(ca);
		},
		onSwap: function (ca, ta) {
			ta.sprites[0].y = 405 + 856 - (ca.sprites[0].y + 206) - 206;
			ta.sprites[0].x = 28 + 1370 - (ca.sprites[0].x + 85) - 85;
			ta.sprites[0].faceleft = !ca.sprites[0].faceleft;
			ta.sprites[0].faceback = !ca.sprites[0].faceback;
			ta.sprites[0].frametimer = ca.sprites[0].frametimer;
			ta.sprites[0].xspd = -ca.sprites[0].xspd;
			ta.sprites[0].yspd = -ca.sprites[0].yspd;
			ta.x = ca.x + ta.sprites[0].x - ca.sprites[0].x;
			ta.y = ca.y + ta.sprites[0].y - ca.sprites[0].y;
		},
		sprites: [
			{
				index: 0,
				name: 'tony',
				dim: new Rectangle(30,180,110,53,true),
				x: 752,
				y: 350,
				xspd: 0,
				yspd: 0,
				xsub: 0,
				ysub: 0,
				faceleft: false,
				faceback: false,
				sheet: 5,
				frame: 0,
				frametimer: 0
			}, {
				name: 'area',
				x: 552,
				y: 785,
				dim: new Rectangle(0,0,149,61,true),
				option: 'Enter Hallway',
				callback: function () { g.area.loadarea(13, 'inout', 'black', 'living'); }
			}, {
				name: 'area',
				x: 819,
				y: 135,
				dim: new Rectangle(0,0,151,359,true),
				option: 'Exit',
				callback: function () { g.area.loadarea(4, 'inout', 'white', 'living'); }
			}, {
				name: 'examine',
				x: 1074,
				y: 265,
				dim: new Rectangle(205,343),
				object: 'painting',
				dialog: 'examinelasthorse'
			}
		],
		objects: [
			{		//door
				recid: 75,
				x: 520,
				y: 463,
				p: 900,
				a: 50
			}, {		//television
				recid: 127,
				x: 955,
				y: 439,
				p: 700
			}, {		//bookcase
				recid: 128,
				x: 35,
				y: 284,
				p: 714,
				a: 50
			}, {		//coffee table
				recid: 129,
				x: 697,
				y: 552,
				p: 638
			}, {		//chair - rear
				recid: 130,
				x: 559,
				y: 468,
				p: 701
			}, {		//chair - front
				recid: 131,
				x: 710,
				y: 336,
				p: 555
			}
		]
	}, {		//room 17 - living room, rear
		reclist: group3recs,
		twin: 16,
		bg: 92,
		hitbox: 89,
		player: 0,
		ents: {
			hall2: [410, 224, 675, 244, true, false],
			outside: [332, 402, 434, 551, false, true]
		},
		onLoad: function (ent) {
			g.area.funcs.doent(g.area.areas[17],ent);
			g.gfx.setbgcolor('white');
		},
		onActivate: function () {
			if (g.area.areas[4].sprites[2].initconvo && !g.area.areas[17].postgramma)
			{
				g.area.areas[17].postgramma = true;
				g.dialog.show('postgramma');
			}
		},
		x: 0,
		y: 0,
		process: function (ca) {
			g.area.funcs.hswalk(ca);
		},
		onSwap: function (ca, ta) {
			ta.sprites[0].y = 405 + 856 - (ca.sprites[0].y + 206) - 206;
			ta.sprites[0].x = 28 + 1370 - (ca.sprites[0].x + 85) - 85;
			ta.sprites[0].faceleft = !ca.sprites[0].faceleft;
			ta.sprites[0].faceback = !ca.sprites[0].faceback;
			ta.sprites[0].frametimer = ca.sprites[0].frametimer;
			ta.sprites[0].xspd = -ca.sprites[0].xspd;
			ta.sprites[0].yspd = -ca.sprites[0].yspd;
			ta.x = ca.x + ta.sprites[0].x - ca.sprites[0].x;
			ta.y = ca.y + ta.sprites[0].y - ca.sprites[0].y;
		},
		sprites: [
			{
				index: 0,
				name: 'tony',
				dim: new Rectangle(30,180,110,53,true),
				x: 752,
				y: 350,
				xspd: 0,
				yspd: 0,
				xsub: 0,
				ysub: 0,
				faceleft: false,
				faceback: false,
				sheet: 5,
				frame: 0,
				frametimer: 0
			}, {
				name: 'area',
				x: 736,
				y: 200,
				dim: new Rectangle(0,0,151,264,true),
				option: 'Enter Hallway',
				callback: function () { g.area.loadarea(12, 'inout', 'black', 'living'); }
			}, {
				name: 'area',
				x: 435,
				y: 763,
				dim: new Rectangle(0,0,147,56,true),
				option: 'Exit',
				callback: function () { g.area.loadarea(4, 'inout', 'white', 'living'); }
			}, {
				name: 'area',
				x: 1022,
				y: 292,
				dim: new Rectangle(134, 333),
				callback: function () {
					g.query.queueoption('Examine bookcase', function () {
						g.dialog.show('examinelivingroombookcase');
					});
					if (!g.haskey) {
						g.query.queueoption('Take key', function () {
							g.haskey = true;
							g.area.funcs.getthing.init(144, 1054-g.area.areas[17].x, 418-g.area.areas[17].y, 'getkey');
						});
					}
				}
			}, {
				name: 'examine',
				x: 266,
				y: 311,
				dim: new Rectangle(208,283),
				object: 'television',
				dialog: 'examinetv'
			}
		],
		objects: [
			{		//door
				recid: 75,
				x: 434,
				y: 434,
				p: 900,
				a: 50
			}, {		//tv
				recid: 125,
				x: 265,
				y: 306,
				p: 540
			}, {		//bookcase
				recid: 126,
				x: 914,
				y: 196,
				p: 525
			}, {		//coffee table
				recid: 129,
				x: 504,
				y: 531,
				p: 616
			}, {		//chair - rear
				recid: 130,
				x: 595,
				y: 494,
				p: 724,
				flipx: true
			}, {		//chair - front
				recid: 131,
				x: 693,
				y: 348,
				p: 569,
				flipx: true
			}
		]
	}
];

g.sprites.tony = {
	process: function (inst) {
		g.gfx.draw(5, inst.dim.x1, inst.dim.y1, 0, 0, {x:false,y:false}, 0.5);
	},
	playerprocess: function (inst) {
		if (typeof inst.halfscale == 'undefined')
			inst.halfscale = false;
		var scalar = inst.halfscale?2:1;
		if (!g.frozen)
		{
			var sign = g.k.left?-1:1;
			if (g.k.left || g.k.right)
			{
				var s = inst.xspd*sign*scalar;
				var c = 0;
				if (s < -100)
					c = 30;
				else if (s < -50)
					c = 15;
				else if (s < 0)
					c = 8;
				else if (s < 50)
					c = 7;
				else if (s < 100)
					c = 5;
				inst.xspd += c*sign/scalar;
			}
			else
			{
				var s = inst.xspd*scalar;
				if (s > 5)
					s -= 5;
				else if (s < -5)
					s += 5;
				else
					s = 0;
				inst.xspd = s/scalar;
			}
			sign = g.k.up?-1:1;
			if (g.k.up || g.k.down)
			{
				var s = inst.yspd*sign*scalar;
				var c = 0;
				if (s < -80)
					c = 25;
				else if (s < -40)
					c = 10;
				else if (s < 0)
					c = 8;
				else if (s < 40)
					c = 6;
				else if (s < 80)
					c = 4;
				inst.yspd += c*sign/scalar;
			}
			else
			{
				var s = inst.yspd*scalar;
				if (s > 5)
					s -= 5;
				else if (s < -5)
					s += 5;
				else
					s = 0;
				inst.yspd = s/scalar;
			}
			if (!(inst.xspd == 0 && inst.yspd == 0))
			{
				if (--inst.frametimer < 0)
				{
					inst.frametimer = 8;
					if (++inst.frame > 3)
						inst.frame = 0;
				}
			}
			else
			{
				inst.frame = 0;
				inst.frametimer = 0;
			}
			if (inst.xspd != 0)
				inst.faceleft = (inst.xspd < 0);
			if (inst.yspd != 0)
				inst.faceback = (inst.yspd < 0);
			g.sprites.func.updPosBySpd(inst);
			g.sprites.func.hitgen(inst, ['top', 'left', 'bottom', 'right'], function (px, num, name) {
				if (px != 0)
					return;
				var sign;
				if (num == 0 || num == 2)
				{
					sign = num - 1;		//top: -1, bottom: 1
					for (var i = 1; i < 15; i++)
					{
						if (g.sprites.func.hit(inst, name, {x:0, y:-i*sign}) != 0)
						{
							inst.y -= (i-1)*sign;
							inst.yspd = 0;
							break;
						}
					}
				}
				else
				{
					sign = num - 2;		//left: -1, right: 1
					for (var i = 1; i < 15; i++)
					{
						if (g.sprites.func.hit(inst, name, {x:-i*sign, y:0}) != 0)
						{
							inst.x -= (i-1)*sign;
							inst.xspd = 0;
							break;
						}
					}
				}
			});
		}
		g.debug.adddata('Player center-x: '+(inst.x+inst.dim.x1+(inst.dim.width/2)));
		g.debug.adddata('Player center-y: '+(inst.y+inst.dim.y1+(inst.dim.height/2)));
		g.gfx.fbdraw(inst.sheet, inst.x, inst.y, [0,1,0,2][inst.frame] + (inst.faceback?3:0), (inst.forcep?inst.forcep:inst.y+inst.dim.y1+(inst.dim.height/2)), {x:inst.faceleft,y:false});
		
		/*if(g.k.frame.space)
			g.area.areas[g.area.currentarea].player = inst ^ 1;*/
	}
};
g.sprites.gramma = {
	process: function (inst)
	{
		
	}
};
g.sprites['null'] = {playerprocess: function () {},process: function () {}};
g.sprites.compbtn = {
	process: function (inst)
	{
		if (!inst.dim)
		{
			inst.dim = new Rectangle(g.area.areas[3].xps[inst.num], g.area.areas[3].yps[inst.num], 155, 155, true);
			inst.x = inst.y = 0;
		}
		if (!g.frozen && g.area.areas[3].state == 1 && g.controls.istouch(inst.dim))
		{
			if (inst.num == 3 || inst.num == 4)
				g.dialog.show('compnope');
			else if (inst.num == 1)
				g.dialog.show('compsentences');
			else if (inst.num == 0)
			{
				g.area.areas[3].state = 2;
				g.area.areas[3].timer = 0;
				g.area.areas[3].nextstate = 6;
			}
			else if (inst.num == 2)
			{
				g.area.areas[3].state = 2;
				g.area.areas[3].timer = 0;
				g.area.areas[3].nextstate = 3;
			}
		}
	}
};
g.sprites.stool = {
	process: function (inst) {
		g.gfx.fbdraw(105, inst.x, inst.y, 0, inst.y + 120);
		if (inst.hasbird)
			g.gfx.fbdraw(101, inst.x + ((g.area.currentarea%2)?10:5), inst.y - 50, 0, inst.y + 120, {x:(g.area.currentarea%2==0), y: false});
		if (typeof inst.hitpiece != 'number')
		{
			var i = 0;
			while (i < g.area.areas[g.area.currentarea].hitpatches.length && g.area.areas[g.area.currentarea].hitpatches[i]) i++;
			inst.hitpiece = i;
			g.area.areas[g.area.currentarea].hitpatches[i] = {recid: 106, x: inst.x - 24, y: inst.y + 89, dim: new Rectangle(0,0,132,53,true)};
		}
		if (!inst.dim)
			inst.dim = new Rectangle(-11,-13,122,160,true);
		if (!g.frozen && g.sprites.func.hitsprite(inst,g.area.areas[g.area.currentarea].player) && (g.k.frame.space || g.sprites.func.isTouched(inst)))
		{
			if (inst.hasbird)
			{
				g.query.queueoption('Take Bird', function () {
					inst.hasbird = false;
					g.area.areas[g.area.areas[g.area.currentarea].twin].sprites[inst.twin].hasbird = false;
					g.area.funcs.captcha.take(3, 280, 150);
				});
			}
			else
			{
				g.query.queueoption('Take Stool', function () {
					var twin = g.area.areas[g.area.areas[g.area.currentarea].twin].sprites[inst.twin];
					delete g.area.areas[g.area.currentarea].hitpatches[inst.hitpiece];
					if (twin && typeof twin.hitpiece == 'number')
						delete g.area.areas[g.area.areas[g.area.currentarea].twin].hitpatches[twin.hitpiece];
					g.area.funcs.captcha.take(111, inst.x - 40 - g.area.areas[g.area.currentarea].x, inst.y - 55 - g.area.areas[g.area.currentarea].y);
					if (twin)
						g.area.areas[g.area.areas[g.area.currentarea].twin].sprites[inst.twin] = null;
					g.area.areas[g.area.currentarea].sprites[inst.index] = null;
				});
				if (inst.canuse)
				{
					g.query.queueoption('Use Stool', function () {
						var ca = g.area.areas[g.area.currentarea];
						inst.store = {x: ca.x, y: ca.y, left: ca.sprites[0].faceleft, back: ca.sprites[0].faceback, sx: ca.sprites[0].x, sy: ca.sprites[0].y};
						ca.x = inst.usex;
						ca.y = inst.usey;
						ca.sprites[0].faceleft = inst.useleft;
						ca.sprites[0].faceback = inst.useback;
						ca.sprites[0].x = inst.x - 34;
						ca.sprites[0].y = inst.y - 200;
						ca.sprites[0].forcep = inst.y + 121;
						ca.sprites[0].frame = 0;
						inst.inuse = true;
					});
				}
			}
		}
		if (inst.inuse && !g.frozen)
		{
			var ca = g.area.areas[g.area.currentarea];
			ca.sprites[0].faceleft = inst.useleft;
			ca.sprites[0].faceback = inst.useback;
			ca.sprites[0].x = inst.x - 34;
			ca.sprites[0].y = inst.y - 200;
			g.frozen = true;
			g.area.areas[1].sprites[0].frame = 0;
			for (var i in inst.useopts)
				g.query.queueoption(inst.useopts[i],inst.useacts[i]);
			g.query.queueoption('Get Off', function () {
				inst.inuse = false;
				var ca = g.area.areas[g.area.currentarea];
				ca.x = inst.store.x;
				ca.y = inst.store.y;
				ca.sprites[0].faceleft = inst.store.left;
				ca.sprites[0].faceback = inst.store.back;
				ca.sprites[0].x = inst.store.sx;
				ca.sprites[0].y = inst.store.sy;
				ca.sprites[0].forcep = false;
			});
		}
	}
};
g.sprites.chatbubble = {
	process: function (inst) {
		if (g.area.areas[3].chums[0].pestering || g.area.areas[3].chums[1].pestering || g.area.areas[3].chums[2].pestering)
		{
			if (!inst.offset) inst.offset = 0;
			if (!g.frozen)
			{
				if (inst.moveright)
					inst.offset++;
				else
					inst.offset--;
				if (Math.abs(inst.offset) == 3)
					inst.moveright = inst.moveright?false:true;
			}
			g.gfx.draw(138, inst.x-g.area.areas[g.area.currentarea].x + inst.offset, inst.y-g.area.areas[g.area.currentarea].y, 0, g.gfx.layers.prioritysprites, {x:(inst.flip?true:false),y:false});
		}
	}
};
g.sprites.bookcase = {
	process: function (inst) {
		if (inst.no && g.area.funcs.captcha.has[111]) inst.no = false;
		if (!g.frozen && !inst.no && g.sprites.func.hitsprite(inst, g.area.areas[1].sprites[0]) && (g.k.frame.space || g.controls.istouch(inst.dim))) {
			g.query.queueoption('Examine bookshelf', function () {
				g.dialog.show('examinebookshelf');
			});
			if (g.area.funcs.captcha.has[111]) {
				g.query.queueoption('Use stool', function () {
					g.area.funcs.captcha.put(111, 540-g.area.areas[1].x, 420-g.area.areas[1].y, function () {
						var index = g.sprites.func.getSlot();
						inst.no = true;
						//var twindex = g.sprites.func.getSlot(2);			//no twin for you, sorry :(
						g.area.areas[1].sprites[index] = { 
							name:'stool',
							x: 560,
							y: 435,
							canuse: true,
							index: index,
							useback: true,
							useleft: true,
							usex: 200,
							usey: 75,
							useopts: [
								'Examine Magic Cue ball',
								'Open Memorabilia chest'
							],
							useacts: [
								function () {
									g.dialog.show('examinecueball');
								},
								function () {
									if (!g.haskey) g.dialog.show('cantopenchest');
									else if (g.area.funcs.captcha.has[920] || g.area.areas[4].sprites[2].haspassport) g.dialog.show('emptychest');
									else {
										g.area.funcs.getthing.init(143, 322, 233, 'getpassport', function () {
											g.area.funcs.captcha.take(920, 270, 100);
										});
									}
								}
							]
						};
					});
				});
			}
		}
	}
};
birth();